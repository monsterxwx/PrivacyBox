import{r as pt,a as ut}from"./layout-base-C3KDmsOA.js";var Ze={exports:{}},Et=Ze.exports,ht;function mt(){return ht||(ht=1,(function(Ke,gt){(function(re,se){Ke.exports=se(pt())})(Et,function(Ie){return(function(re){var se={};function H(R){if(se[R])return se[R].exports;var D=se[R]={i:R,l:!1,exports:{}};return re[R].call(D.exports,D,D.exports,H),D.l=!0,D.exports}return H.m=re,H.c=se,H.i=function(R){return R},H.d=function(R,D,Q){H.o(R,D)||Object.defineProperty(R,D,{configurable:!1,enumerable:!0,get:Q})},H.n=function(R){var D=R&&R.__esModule?function(){return R.default}:function(){return R};return H.d(D,"a",D),D},H.o=function(R,D){return Object.prototype.hasOwnProperty.call(R,D)},H.p="",H(H.s=7)})([(function(re,se){re.exports=Ie}),(function(re,se,H){var R=H(0).FDLayoutConstants;function D(){}for(var Q in R)D[Q]=R[Q];D.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,D.DEFAULT_RADIAL_SEPARATION=R.DEFAULT_EDGE_LENGTH,D.DEFAULT_COMPONENT_SEPERATION=60,D.TILE=!0,D.TILING_PADDING_VERTICAL=10,D.TILING_PADDING_HORIZONTAL=10,D.TREE_REDUCTION_ON_INCREMENTAL=!1,re.exports=D}),(function(re,se,H){var R=H(0).FDLayoutEdge;function D(P,N,O){R.call(this,P,N,O)}D.prototype=Object.create(R.prototype);for(var Q in R)D[Q]=R[Q];re.exports=D}),(function(re,se,H){var R=H(0).LGraph;function D(P,N,O){R.call(this,P,N,O)}D.prototype=Object.create(R.prototype);for(var Q in R)D[Q]=R[Q];re.exports=D}),(function(re,se,H){var R=H(0).LGraphManager;function D(P){R.call(this,P)}D.prototype=Object.create(R.prototype);for(var Q in R)D[Q]=R[Q];re.exports=D}),(function(re,se,H){var R=H(0).FDLayoutNode,D=H(0).IMath;function Q(N,O,S,_){R.call(this,N,O,S,_)}Q.prototype=Object.create(R.prototype);for(var P in R)Q[P]=R[P];Q.prototype.move=function(){var N=this.graphManager.getLayout();this.displacementX=N.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=N.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>N.coolingFactor*N.maxNodeDisplacement&&(this.displacementX=N.coolingFactor*N.maxNodeDisplacement*D.sign(this.displacementX)),Math.abs(this.displacementY)>N.coolingFactor*N.maxNodeDisplacement&&(this.displacementY=N.coolingFactor*N.maxNodeDisplacement*D.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),N.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},Q.prototype.propogateDisplacementToChildren=function(N,O){for(var S=this.getChild().getNodes(),_,j=0;j<S.length;j++)_=S[j],_.getChild()==null?(_.moveBy(N,O),_.displacementX+=N,_.displacementY+=O):_.propogateDisplacementToChildren(N,O)},Q.prototype.setPred1=function(N){this.pred1=N},Q.prototype.getPred1=function(){return pred1},Q.prototype.getPred2=function(){return pred2},Q.prototype.setNext=function(N){this.next=N},Q.prototype.getNext=function(){return next},Q.prototype.setProcessed=function(N){this.processed=N},Q.prototype.isProcessed=function(){return processed},re.exports=Q}),(function(re,se,H){var R=H(0).FDLayout,D=H(4),Q=H(3),P=H(5),N=H(2),O=H(1),S=H(0).FDLayoutConstants,_=H(0).LayoutConstants,j=H(0).Point,Z=H(0).PointD,ne=H(0).Layout,y=H(0).Integer,ge=H(0).IGeometry,A=H(0).LGraph,$=H(0).Transform;function u(){R.call(this),this.toBeTiled={}}u.prototype=Object.create(R.prototype);for(var we in R)u[we]=R[we];u.prototype.newGraphManager=function(){var o=new D(this);return this.graphManager=o,o},u.prototype.newGraph=function(o){return new Q(null,this.graphManager,o)},u.prototype.newNode=function(o){return new P(this.graphManager,o)},u.prototype.newEdge=function(o){return new N(null,null,o)},u.prototype.initParameters=function(){R.prototype.initParameters.call(this,arguments),this.isSubLayout||(O.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=O.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=O.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=S.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=S.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=S.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=S.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=S.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=S.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/S.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=S.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},u.prototype.layout=function(){var o=_.DEFAULT_CREATE_BENDS_AS_NEEDED;return o&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},u.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(O.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var s=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(g){return s.has(g)});this.graphManager.setAllNodesToApplyGravitation(n)}}else{var o=this.getFlatForest();if(o.length>0)this.positionNodesRadially(o);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var s=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(f){return s.has(f)});this.graphManager.setAllNodesToApplyGravitation(n),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},u.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%S.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var o=new Set(this.getAllNodes()),s=this.nodesWithGravity.filter(function(d){return o.has(d)});this.graphManager.setAllNodesToApplyGravitation(s),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=S.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=S.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var n=!this.isTreeGrowing&&!this.isGrowthFinished,f=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(n,f),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},u.prototype.getPositionsData=function(){for(var o=this.graphManager.getAllNodes(),s={},n=0;n<o.length;n++){var f=o[n].rect,d=o[n].id;s[d]={id:d,x:f.getCenterX(),y:f.getCenterY(),w:f.width,h:f.height}}return s},u.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var o=!1;if(S.ANIMATE==="during")this.emit("layoutstarted");else{for(;!o;)o=this.tick();this.graphManager.updateBounds()}},u.prototype.calculateNodesToApplyGravitationTo=function(){var o=[],s,n=this.graphManager.getGraphs(),f=n.length,d;for(d=0;d<f;d++)s=n[d],s.updateConnected(),s.isConnected||(o=o.concat(s.getNodes()));return o},u.prototype.createBendpoints=function(){var o=[];o=o.concat(this.graphManager.getAllEdges());var s=new Set,n;for(n=0;n<o.length;n++){var f=o[n];if(!s.has(f)){var d=f.getSource(),g=f.getTarget();if(d==g)f.getBendpoints().push(new Z),f.getBendpoints().push(new Z),this.createDummyNodesForBendpoints(f),s.add(f);else{var M=[];if(M=M.concat(d.getEdgeListToNode(g)),M=M.concat(g.getEdgeListToNode(d)),!s.has(M[0])){if(M.length>1){var e;for(e=0;e<M.length;e++){var i=M[e];i.getBendpoints().push(new Z),this.createDummyNodesForBendpoints(i)}}M.forEach(function(t){s.add(t)})}}}if(s.size==o.length)break}},u.prototype.positionNodesRadially=function(o){for(var s=new j(0,0),n=Math.ceil(Math.sqrt(o.length)),f=0,d=0,g=0,M=new Z(0,0),e=0;e<o.length;e++){e%n==0&&(g=0,d=f,e!=0&&(d+=O.DEFAULT_COMPONENT_SEPERATION),f=0);var i=o[e],t=ne.findCenterOfTree(i);s.x=g,s.y=d,M=u.radialLayout(i,t,s),M.y>f&&(f=Math.floor(M.y)),g=Math.floor(M.x+O.DEFAULT_COMPONENT_SEPERATION)}this.transform(new Z(_.WORLD_CENTER_X-M.x/2,_.WORLD_CENTER_Y-M.y/2))},u.radialLayout=function(o,s,n){var f=Math.max(this.maxDiagonalInTree(o),O.DEFAULT_RADIAL_SEPARATION);u.branchRadialLayout(s,null,0,359,0,f);var d=A.calculateBounds(o),g=new $;g.setDeviceOrgX(d.getMinX()),g.setDeviceOrgY(d.getMinY()),g.setWorldOrgX(n.x),g.setWorldOrgY(n.y);for(var M=0;M<o.length;M++){var e=o[M];e.transform(g)}var i=new Z(d.getMaxX(),d.getMaxY());return g.inverseTransformPoint(i)},u.branchRadialLayout=function(o,s,n,f,d,g){var M=(f-n+1)/2;M<0&&(M+=180);var e=(M+n)%360,i=e*ge.TWO_PI/360,t=d*Math.cos(i),a=d*Math.sin(i);o.setCenter(t,a);var r=[];r=r.concat(o.getEdges());var l=r.length;s!=null&&l--;for(var h=0,c=r.length,E,m=o.getEdgesBetween(s);m.length>1;){var b=m[0];m.splice(0,1);var w=r.indexOf(b);w>=0&&r.splice(w,1),c--,l--}s!=null?E=(r.indexOf(m[0])+1)%c:E=0;for(var C=Math.abs(f-n)/l,G=E;h!=l;G=++G%c){var L=r[G].getOtherEnd(o);if(L!=s){var v=(n+h*C)%360,T=(v+C)%360;u.branchRadialLayout(L,o,v,T,d+g,g),h++}}},u.maxDiagonalInTree=function(o){for(var s=y.MIN_VALUE,n=0;n<o.length;n++){var f=o[n],d=f.getDiagonal();d>s&&(s=d)}return s},u.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},u.prototype.groupZeroDegreeMembers=function(){var o=this,s={};this.memberGroups={},this.idToDummyNode={};for(var n=[],f=this.graphManager.getAllNodes(),d=0;d<f.length;d++){var g=f[d],M=g.getParent();this.getNodeDegreeWithChildren(g)===0&&(M.id==null||!this.getToBeTiled(M))&&n.push(g)}for(var d=0;d<n.length;d++){var g=n[d],e=g.getParent().id;typeof s[e]>"u"&&(s[e]=[]),s[e]=s[e].concat(g)}Object.keys(s).forEach(function(i){if(s[i].length>1){var t="DummyCompound_"+i;o.memberGroups[t]=s[i];var a=s[i][0].getParent(),r=new P(o.graphManager);r.id=t,r.paddingLeft=a.paddingLeft||0,r.paddingRight=a.paddingRight||0,r.paddingBottom=a.paddingBottom||0,r.paddingTop=a.paddingTop||0,o.idToDummyNode[t]=r;var l=o.getGraphManager().add(o.newGraph(),r),h=a.getChild();h.add(r);for(var c=0;c<s[i].length;c++){var E=s[i][c];h.remove(E),l.add(E)}}})},u.prototype.clearCompounds=function(){var o={},s={};this.performDFSOnCompounds();for(var n=0;n<this.compoundOrder.length;n++)s[this.compoundOrder[n].id]=this.compoundOrder[n],o[this.compoundOrder[n].id]=[].concat(this.compoundOrder[n].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[n].getChild()),this.compoundOrder[n].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(o,s)},u.prototype.clearZeroDegreeMembers=function(){var o=this,s=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(n){var f=o.idToDummyNode[n];s[n]=o.tileNodes(o.memberGroups[n],f.paddingLeft+f.paddingRight),f.rect.width=s[n].width,f.rect.height=s[n].height})},u.prototype.repopulateCompounds=function(){for(var o=this.compoundOrder.length-1;o>=0;o--){var s=this.compoundOrder[o],n=s.id,f=s.paddingLeft,d=s.paddingTop;this.adjustLocations(this.tiledMemberPack[n],s.rect.x,s.rect.y,f,d)}},u.prototype.repopulateZeroDegreeMembers=function(){var o=this,s=this.tiledZeroDegreePack;Object.keys(s).forEach(function(n){var f=o.idToDummyNode[n],d=f.paddingLeft,g=f.paddingTop;o.adjustLocations(s[n],f.rect.x,f.rect.y,d,g)})},u.prototype.getToBeTiled=function(o){var s=o.id;if(this.toBeTiled[s]!=null)return this.toBeTiled[s];var n=o.getChild();if(n==null)return this.toBeTiled[s]=!1,!1;for(var f=n.getNodes(),d=0;d<f.length;d++){var g=f[d];if(this.getNodeDegree(g)>0)return this.toBeTiled[s]=!1,!1;if(g.getChild()==null){this.toBeTiled[g.id]=!1;continue}if(!this.getToBeTiled(g))return this.toBeTiled[s]=!1,!1}return this.toBeTiled[s]=!0,!0},u.prototype.getNodeDegree=function(o){o.id;for(var s=o.getEdges(),n=0,f=0;f<s.length;f++){var d=s[f];d.getSource().id!==d.getTarget().id&&(n=n+1)}return n},u.prototype.getNodeDegreeWithChildren=function(o){var s=this.getNodeDegree(o);if(o.getChild()==null)return s;for(var n=o.getChild().getNodes(),f=0;f<n.length;f++){var d=n[f];s+=this.getNodeDegreeWithChildren(d)}return s},u.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},u.prototype.fillCompexOrderByDFS=function(o){for(var s=0;s<o.length;s++){var n=o[s];n.getChild()!=null&&this.fillCompexOrderByDFS(n.getChild().getNodes()),this.getToBeTiled(n)&&this.compoundOrder.push(n)}},u.prototype.adjustLocations=function(o,s,n,f,d){s+=f,n+=d;for(var g=s,M=0;M<o.rows.length;M++){var e=o.rows[M];s=g;for(var i=0,t=0;t<e.length;t++){var a=e[t];a.rect.x=s,a.rect.y=n,s+=a.rect.width+o.horizontalPadding,a.rect.height>i&&(i=a.rect.height)}n+=i+o.verticalPadding}},u.prototype.tileCompoundMembers=function(o,s){var n=this;this.tiledMemberPack=[],Object.keys(o).forEach(function(f){var d=s[f];n.tiledMemberPack[f]=n.tileNodes(o[f],d.paddingLeft+d.paddingRight),d.rect.width=n.tiledMemberPack[f].width,d.rect.height=n.tiledMemberPack[f].height})},u.prototype.tileNodes=function(o,s){var n=O.TILING_PADDING_VERTICAL,f=O.TILING_PADDING_HORIZONTAL,d={rows:[],rowWidth:[],rowHeight:[],width:0,height:s,verticalPadding:n,horizontalPadding:f};o.sort(function(e,i){return e.rect.width*e.rect.height>i.rect.width*i.rect.height?-1:e.rect.width*e.rect.height<i.rect.width*i.rect.height?1:0});for(var g=0;g<o.length;g++){var M=o[g];d.rows.length==0?this.insertNodeToRow(d,M,0,s):this.canAddHorizontal(d,M.rect.width,M.rect.height)?this.insertNodeToRow(d,M,this.getShortestRowIndex(d),s):this.insertNodeToRow(d,M,d.rows.length,s),this.shiftToLastRow(d)}return d},u.prototype.insertNodeToRow=function(o,s,n,f){var d=f;if(n==o.rows.length){var g=[];o.rows.push(g),o.rowWidth.push(d),o.rowHeight.push(0)}var M=o.rowWidth[n]+s.rect.width;o.rows[n].length>0&&(M+=o.horizontalPadding),o.rowWidth[n]=M,o.width<M&&(o.width=M);var e=s.rect.height;n>0&&(e+=o.verticalPadding);var i=0;e>o.rowHeight[n]&&(i=o.rowHeight[n],o.rowHeight[n]=e,i=o.rowHeight[n]-i),o.height+=i,o.rows[n].push(s)},u.prototype.getShortestRowIndex=function(o){for(var s=-1,n=Number.MAX_VALUE,f=0;f<o.rows.length;f++)o.rowWidth[f]<n&&(s=f,n=o.rowWidth[f]);return s},u.prototype.getLongestRowIndex=function(o){for(var s=-1,n=Number.MIN_VALUE,f=0;f<o.rows.length;f++)o.rowWidth[f]>n&&(s=f,n=o.rowWidth[f]);return s},u.prototype.canAddHorizontal=function(o,s,n){var f=this.getShortestRowIndex(o);if(f<0)return!0;var d=o.rowWidth[f];if(d+o.horizontalPadding+s<=o.width)return!0;var g=0;o.rowHeight[f]<n&&f>0&&(g=n+o.verticalPadding-o.rowHeight[f]);var M;o.width-d>=s+o.horizontalPadding?M=(o.height+g)/(d+s+o.horizontalPadding):M=(o.height+g)/o.width,g=n+o.verticalPadding;var e;return o.width<s?e=(o.height+g)/s:e=(o.height+g)/o.width,e<1&&(e=1/e),M<1&&(M=1/M),M<e},u.prototype.shiftToLastRow=function(o){var s=this.getLongestRowIndex(o),n=o.rowWidth.length-1,f=o.rows[s],d=f[f.length-1],g=d.width+o.horizontalPadding;if(o.width-o.rowWidth[n]>g&&s!=n){f.splice(-1,1),o.rows[n].push(d),o.rowWidth[s]=o.rowWidth[s]-g,o.rowWidth[n]=o.rowWidth[n]+g,o.width=o.rowWidth[instance.getLongestRowIndex(o)];for(var M=Number.MIN_VALUE,e=0;e<f.length;e++)f[e].height>M&&(M=f[e].height);s>0&&(M+=o.verticalPadding);var i=o.rowHeight[s]+o.rowHeight[n];o.rowHeight[s]=M,o.rowHeight[n]<d.height+o.verticalPadding&&(o.rowHeight[n]=d.height+o.verticalPadding);var t=o.rowHeight[s]+o.rowHeight[n];o.height+=t-i,this.shiftToLastRow(o)}},u.prototype.tilingPreLayout=function(){O.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},u.prototype.tilingPostLayout=function(){O.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},u.prototype.reduceTrees=function(){for(var o=[],s=!0,n;s;){var f=this.graphManager.getAllNodes(),d=[];s=!1;for(var g=0;g<f.length;g++)n=f[g],n.getEdges().length==1&&!n.getEdges()[0].isInterGraph&&n.getChild()==null&&(d.push([n,n.getEdges()[0],n.getOwner()]),s=!0);if(s==!0){for(var M=[],e=0;e<d.length;e++)d[e][0].getEdges().length==1&&(M.push(d[e]),d[e][0].getOwner().remove(d[e][0]));o.push(M),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=o},u.prototype.growTree=function(o){for(var s=o.length,n=o[s-1],f,d=0;d<n.length;d++)f=n[d],this.findPlaceforPrunedNode(f),f[2].add(f[0]),f[2].add(f[1],f[1].source,f[1].target);o.splice(o.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},u.prototype.findPlaceforPrunedNode=function(o){var s,n,f=o[0];f==o[1].source?n=o[1].target:n=o[1].source;var d=n.startX,g=n.finishX,M=n.startY,e=n.finishY,i=0,t=0,a=0,r=0,l=[i,a,t,r];if(M>0)for(var h=d;h<=g;h++)l[0]+=this.grid[h][M-1].length+this.grid[h][M].length-1;if(g<this.grid.length-1)for(var h=M;h<=e;h++)l[1]+=this.grid[g+1][h].length+this.grid[g][h].length-1;if(e<this.grid[0].length-1)for(var h=d;h<=g;h++)l[2]+=this.grid[h][e+1].length+this.grid[h][e].length-1;if(d>0)for(var h=M;h<=e;h++)l[3]+=this.grid[d-1][h].length+this.grid[d][h].length-1;for(var c=y.MAX_VALUE,E,m,b=0;b<l.length;b++)l[b]<c?(c=l[b],E=1,m=b):l[b]==c&&E++;if(E==3&&c==0)l[0]==0&&l[1]==0&&l[2]==0?s=1:l[0]==0&&l[1]==0&&l[3]==0?s=0:l[0]==0&&l[2]==0&&l[3]==0?s=3:l[1]==0&&l[2]==0&&l[3]==0&&(s=2);else if(E==2&&c==0){var w=Math.floor(Math.random()*2);l[0]==0&&l[1]==0?w==0?s=0:s=1:l[0]==0&&l[2]==0?w==0?s=0:s=2:l[0]==0&&l[3]==0?w==0?s=0:s=3:l[1]==0&&l[2]==0?w==0?s=1:s=2:l[1]==0&&l[3]==0?w==0?s=1:s=3:w==0?s=2:s=3}else if(E==4&&c==0){var w=Math.floor(Math.random()*4);s=w}else s=m;s==0?f.setCenter(n.getCenterX(),n.getCenterY()-n.getHeight()/2-S.DEFAULT_EDGE_LENGTH-f.getHeight()/2):s==1?f.setCenter(n.getCenterX()+n.getWidth()/2+S.DEFAULT_EDGE_LENGTH+f.getWidth()/2,n.getCenterY()):s==2?f.setCenter(n.getCenterX(),n.getCenterY()+n.getHeight()/2+S.DEFAULT_EDGE_LENGTH+f.getHeight()/2):f.setCenter(n.getCenterX()-n.getWidth()/2-S.DEFAULT_EDGE_LENGTH-f.getWidth()/2,n.getCenterY())},re.exports=u}),(function(re,se,H){var R={};R.layoutBase=H(0),R.CoSEConstants=H(1),R.CoSEEdge=H(2),R.CoSEGraph=H(3),R.CoSEGraphManager=H(4),R.CoSELayout=H(6),R.CoSENode=H(5),re.exports=R})])})})(Ze)),Ze.exports}var $e={exports:{}},Tt=$e.exports,lt;function Ct(){return lt||(lt=1,(function(Ke,gt){(function(re,se){Ke.exports=se(ut())})(Tt,function(Ie){return(()=>{var re={45:((D,Q,P)=>{var N={};N.layoutBase=P(551),N.CoSEConstants=P(806),N.CoSEEdge=P(767),N.CoSEGraph=P(880),N.CoSEGraphManager=P(578),N.CoSELayout=P(765),N.CoSENode=P(991),N.ConstraintHandler=P(902),D.exports=N}),806:((D,Q,P)=>{var N=P(551).FDLayoutConstants;function O(){}for(var S in N)O[S]=N[S];O.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,O.DEFAULT_RADIAL_SEPARATION=N.DEFAULT_EDGE_LENGTH,O.DEFAULT_COMPONENT_SEPERATION=60,O.TILE=!0,O.TILING_PADDING_VERTICAL=10,O.TILING_PADDING_HORIZONTAL=10,O.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,O.ENFORCE_CONSTRAINTS=!0,O.APPLY_LAYOUT=!0,O.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,O.TREE_REDUCTION_ON_INCREMENTAL=!0,O.PURE_INCREMENTAL=O.DEFAULT_INCREMENTAL,D.exports=O}),767:((D,Q,P)=>{var N=P(551).FDLayoutEdge;function O(_,j,Z){N.call(this,_,j,Z)}O.prototype=Object.create(N.prototype);for(var S in N)O[S]=N[S];D.exports=O}),880:((D,Q,P)=>{var N=P(551).LGraph;function O(_,j,Z){N.call(this,_,j,Z)}O.prototype=Object.create(N.prototype);for(var S in N)O[S]=N[S];D.exports=O}),578:((D,Q,P)=>{var N=P(551).LGraphManager;function O(_){N.call(this,_)}O.prototype=Object.create(N.prototype);for(var S in N)O[S]=N[S];D.exports=O}),765:((D,Q,P)=>{var N=P(551).FDLayout,O=P(578),S=P(880),_=P(991),j=P(767),Z=P(806),ne=P(902),y=P(551).FDLayoutConstants,ge=P(551).LayoutConstants,A=P(551).Point,$=P(551).PointD,u=P(551).DimensionD,we=P(551).Layout,o=P(551).Integer,s=P(551).IGeometry,n=P(551).LGraph,f=P(551).Transform,d=P(551).LinkedList;function g(){N.call(this),this.toBeTiled={},this.constraints={}}g.prototype=Object.create(N.prototype);for(var M in N)g[M]=N[M];g.prototype.newGraphManager=function(){var e=new O(this);return this.graphManager=e,e},g.prototype.newGraph=function(e){return new S(null,this.graphManager,e)},g.prototype.newNode=function(e){return new _(this.graphManager,e)},g.prototype.newEdge=function(e){return new j(null,null,e)},g.prototype.initParameters=function(){N.prototype.initParameters.call(this,arguments),this.isSubLayout||(Z.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=Z.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=Z.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=y.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=y.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=y.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=y.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},g.prototype.initSpringEmbedder=function(){N.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/y.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},g.prototype.layout=function(){var e=ge.DEFAULT_CREATE_BENDS_AS_NEEDED;return e&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},g.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(Z.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var i=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter(function(l){return i.has(l)});this.graphManager.setAllNodesToApplyGravitation(t)}}else{var e=this.getFlatForest();if(e.length>0)this.positionNodesRadially(e);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var i=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter(function(a){return i.has(a)});this.graphManager.setAllNodesToApplyGravitation(t),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(ne.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),Z.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},g.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%y.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),i=this.nodesWithGravity.filter(function(r){return e.has(r)});this.graphManager.setAllNodesToApplyGravitation(i),this.graphManager.updateBounds(),this.updateGrid(),Z.PURE_INCREMENTAL?this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),Z.PURE_INCREMENTAL?this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=y.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var t=!this.isTreeGrowing&&!this.isGrowthFinished,a=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(t,a),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},g.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),i={},t=0;t<e.length;t++){var a=e[t].rect,r=e[t].id;i[r]={id:r,x:a.getCenterX(),y:a.getCenterY(),w:a.width,h:a.height}}return i},g.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var e=!1;if(y.ANIMATE==="during")this.emit("layoutstarted");else{for(;!e;)e=this.tick();this.graphManager.updateBounds()}},g.prototype.moveNodes=function(){for(var e=this.getAllNodes(),i,t=0;t<e.length;t++)i=e[t],i.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var t=0;t<e.length;t++)i=e[t],i.move()},g.prototype.initConstraintVariables=function(){var e=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var i=this.graphManager.getAllNodes(),t=0;t<i.length;t++){var a=i[t];this.idToNodeMap.set(a.id,a)}var r=function v(T){for(var x=T.getChild().getNodes(),I,z=0,he=0;he<x.length;he++)I=x[he],I.getChild()==null?e.fixedNodeSet.has(I.id)&&(z+=100):z+=v(I);return z};if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(x){e.fixedNodeSet.add(x.nodeId)});for(var i=this.graphManager.getAllNodes(),a,t=0;t<i.length;t++)if(a=i[t],a.getChild()!=null){var l=r(a);l>0&&(a.fixedNodeWeight=l)}}if(this.constraints.relativePlacementConstraint){var h=new Map,c=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(v){e.fixedNodesOnHorizontal.add(v),e.fixedNodesOnVertical.add(v)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var E=this.constraints.alignmentConstraint.vertical,t=0;t<E.length;t++)this.dummyToNodeForVerticalAlignment.set("dummy"+t,[]),E[t].forEach(function(T){h.set(T,"dummy"+t),e.dummyToNodeForVerticalAlignment.get("dummy"+t).push(T),e.fixedNodeSet.has(T)&&e.fixedNodesOnHorizontal.add("dummy"+t)});if(this.constraints.alignmentConstraint.horizontal)for(var m=this.constraints.alignmentConstraint.horizontal,t=0;t<m.length;t++)this.dummyToNodeForHorizontalAlignment.set("dummy"+t,[]),m[t].forEach(function(T){c.set(T,"dummy"+t),e.dummyToNodeForHorizontalAlignment.get("dummy"+t).push(T),e.fixedNodeSet.has(T)&&e.fixedNodesOnVertical.add("dummy"+t)})}if(Z.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(v){var T,x,I;for(I=v.length-1;I>=2*v.length/3;I--)T=Math.floor(Math.random()*(I+1)),x=v[I],v[I]=v[T],v[T]=x;return v},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(v){if(v.left){var T=h.has(v.left)?h.get(v.left):v.left,x=h.has(v.right)?h.get(v.right):v.right;e.nodesInRelativeHorizontal.includes(T)||(e.nodesInRelativeHorizontal.push(T),e.nodeToRelativeConstraintMapHorizontal.set(T,[]),e.dummyToNodeForVerticalAlignment.has(T)?e.nodeToTempPositionMapHorizontal.set(T,e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(T)[0]).getCenterX()):e.nodeToTempPositionMapHorizontal.set(T,e.idToNodeMap.get(T).getCenterX())),e.nodesInRelativeHorizontal.includes(x)||(e.nodesInRelativeHorizontal.push(x),e.nodeToRelativeConstraintMapHorizontal.set(x,[]),e.dummyToNodeForVerticalAlignment.has(x)?e.nodeToTempPositionMapHorizontal.set(x,e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(x)[0]).getCenterX()):e.nodeToTempPositionMapHorizontal.set(x,e.idToNodeMap.get(x).getCenterX())),e.nodeToRelativeConstraintMapHorizontal.get(T).push({right:x,gap:v.gap}),e.nodeToRelativeConstraintMapHorizontal.get(x).push({left:T,gap:v.gap})}else{var I=c.has(v.top)?c.get(v.top):v.top,z=c.has(v.bottom)?c.get(v.bottom):v.bottom;e.nodesInRelativeVertical.includes(I)||(e.nodesInRelativeVertical.push(I),e.nodeToRelativeConstraintMapVertical.set(I,[]),e.dummyToNodeForHorizontalAlignment.has(I)?e.nodeToTempPositionMapVertical.set(I,e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(I)[0]).getCenterY()):e.nodeToTempPositionMapVertical.set(I,e.idToNodeMap.get(I).getCenterY())),e.nodesInRelativeVertical.includes(z)||(e.nodesInRelativeVertical.push(z),e.nodeToRelativeConstraintMapVertical.set(z,[]),e.dummyToNodeForHorizontalAlignment.has(z)?e.nodeToTempPositionMapVertical.set(z,e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(z)[0]).getCenterY()):e.nodeToTempPositionMapVertical.set(z,e.idToNodeMap.get(z).getCenterY())),e.nodeToRelativeConstraintMapVertical.get(I).push({bottom:z,gap:v.gap}),e.nodeToRelativeConstraintMapVertical.get(z).push({top:I,gap:v.gap})}});else{var b=new Map,w=new Map;this.constraints.relativePlacementConstraint.forEach(function(v){if(v.left){var T=h.has(v.left)?h.get(v.left):v.left,x=h.has(v.right)?h.get(v.right):v.right;b.has(T)?b.get(T).push(x):b.set(T,[x]),b.has(x)?b.get(x).push(T):b.set(x,[T])}else{var I=c.has(v.top)?c.get(v.top):v.top,z=c.has(v.bottom)?c.get(v.bottom):v.bottom;w.has(I)?w.get(I).push(z):w.set(I,[z]),w.has(z)?w.get(z).push(I):w.set(z,[I])}});var C=function(T,x){var I=[],z=[],he=new d,me=new Set,ce=0;return T.forEach(function(Ue,Ye){if(!me.has(Ye)){I[ce]=[],z[ce]=!1;var Ee=Ye;for(he.push(Ee),me.add(Ee),I[ce].push(Ee);he.length!=0;){Ee=he.shift(),x.has(Ee)&&(z[ce]=!0);var Xe=T.get(Ee);Xe.forEach(function(Re){me.has(Re)||(he.push(Re),me.add(Re),I[ce].push(Re))})}ce++}}),{components:I,isFixed:z}},G=C(b,e.fixedNodesOnHorizontal);this.componentsOnHorizontal=G.components,this.fixedComponentsOnHorizontal=G.isFixed;var L=C(w,e.fixedNodesOnVertical);this.componentsOnVertical=L.components,this.fixedComponentsOnVertical=L.isFixed}}},g.prototype.updateDisplacements=function(){var e=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(L){var v=e.idToNodeMap.get(L.nodeId);v.displacementX=0,v.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var i=this.constraints.alignmentConstraint.vertical,t=0;t<i.length;t++){for(var a=0,r=0;r<i[t].length;r++){if(this.fixedNodeSet.has(i[t][r])){a=0;break}a+=this.idToNodeMap.get(i[t][r]).displacementX}for(var l=a/i[t].length,r=0;r<i[t].length;r++)this.idToNodeMap.get(i[t][r]).displacementX=l}if(this.constraints.alignmentConstraint.horizontal)for(var h=this.constraints.alignmentConstraint.horizontal,t=0;t<h.length;t++){for(var c=0,r=0;r<h[t].length;r++){if(this.fixedNodeSet.has(h[t][r])){c=0;break}c+=this.idToNodeMap.get(h[t][r]).displacementY}for(var E=c/h[t].length,r=0;r<h[t].length;r++)this.idToNodeMap.get(h[t][r]).displacementY=E}}if(this.constraints.relativePlacementConstraint)if(Z.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(L){if(!e.fixedNodesOnHorizontal.has(L)){var v=0;e.dummyToNodeForVerticalAlignment.has(L)?v=e.idToNodeMap.get(e.dummyToNodeForVerticalAlignment.get(L)[0]).displacementX:v=e.idToNodeMap.get(L).displacementX,e.nodeToRelativeConstraintMapHorizontal.get(L).forEach(function(T){if(T.right){var x=e.nodeToTempPositionMapHorizontal.get(T.right)-e.nodeToTempPositionMapHorizontal.get(L)-v;x<T.gap&&(v-=T.gap-x)}else{var x=e.nodeToTempPositionMapHorizontal.get(L)-e.nodeToTempPositionMapHorizontal.get(T.left)+v;x<T.gap&&(v+=T.gap-x)}}),e.nodeToTempPositionMapHorizontal.set(L,e.nodeToTempPositionMapHorizontal.get(L)+v),e.dummyToNodeForVerticalAlignment.has(L)?e.dummyToNodeForVerticalAlignment.get(L).forEach(function(T){e.idToNodeMap.get(T).displacementX=v}):e.idToNodeMap.get(L).displacementX=v}}),this.nodesInRelativeVertical.forEach(function(L){if(!e.fixedNodesOnHorizontal.has(L)){var v=0;e.dummyToNodeForHorizontalAlignment.has(L)?v=e.idToNodeMap.get(e.dummyToNodeForHorizontalAlignment.get(L)[0]).displacementY:v=e.idToNodeMap.get(L).displacementY,e.nodeToRelativeConstraintMapVertical.get(L).forEach(function(T){if(T.bottom){var x=e.nodeToTempPositionMapVertical.get(T.bottom)-e.nodeToTempPositionMapVertical.get(L)-v;x<T.gap&&(v-=T.gap-x)}else{var x=e.nodeToTempPositionMapVertical.get(L)-e.nodeToTempPositionMapVertical.get(T.top)+v;x<T.gap&&(v+=T.gap-x)}}),e.nodeToTempPositionMapVertical.set(L,e.nodeToTempPositionMapVertical.get(L)+v),e.dummyToNodeForHorizontalAlignment.has(L)?e.dummyToNodeForHorizontalAlignment.get(L).forEach(function(T){e.idToNodeMap.get(T).displacementY=v}):e.idToNodeMap.get(L).displacementY=v}});else{for(var t=0;t<this.componentsOnHorizontal.length;t++){var m=this.componentsOnHorizontal[t];if(this.fixedComponentsOnHorizontal[t])for(var r=0;r<m.length;r++)this.dummyToNodeForVerticalAlignment.has(m[r])?this.dummyToNodeForVerticalAlignment.get(m[r]).forEach(function(T){e.idToNodeMap.get(T).displacementX=0}):this.idToNodeMap.get(m[r]).displacementX=0;else{for(var b=0,w=0,r=0;r<m.length;r++)if(this.dummyToNodeForVerticalAlignment.has(m[r])){var C=this.dummyToNodeForVerticalAlignment.get(m[r]);b+=C.length*this.idToNodeMap.get(C[0]).displacementX,w+=C.length}else b+=this.idToNodeMap.get(m[r]).displacementX,w++;for(var G=b/w,r=0;r<m.length;r++)this.dummyToNodeForVerticalAlignment.has(m[r])?this.dummyToNodeForVerticalAlignment.get(m[r]).forEach(function(T){e.idToNodeMap.get(T).displacementX=G}):this.idToNodeMap.get(m[r]).displacementX=G}}for(var t=0;t<this.componentsOnVertical.length;t++){var m=this.componentsOnVertical[t];if(this.fixedComponentsOnVertical[t])for(var r=0;r<m.length;r++)this.dummyToNodeForHorizontalAlignment.has(m[r])?this.dummyToNodeForHorizontalAlignment.get(m[r]).forEach(function(x){e.idToNodeMap.get(x).displacementY=0}):this.idToNodeMap.get(m[r]).displacementY=0;else{for(var b=0,w=0,r=0;r<m.length;r++)if(this.dummyToNodeForHorizontalAlignment.has(m[r])){var C=this.dummyToNodeForHorizontalAlignment.get(m[r]);b+=C.length*this.idToNodeMap.get(C[0]).displacementY,w+=C.length}else b+=this.idToNodeMap.get(m[r]).displacementY,w++;for(var G=b/w,r=0;r<m.length;r++)this.dummyToNodeForHorizontalAlignment.has(m[r])?this.dummyToNodeForHorizontalAlignment.get(m[r]).forEach(function(he){e.idToNodeMap.get(he).displacementY=G}):this.idToNodeMap.get(m[r]).displacementY=G}}}},g.prototype.calculateNodesToApplyGravitationTo=function(){var e=[],i,t=this.graphManager.getGraphs(),a=t.length,r;for(r=0;r<a;r++)i=t[r],i.updateConnected(),i.isConnected||(e=e.concat(i.getNodes()));return e},g.prototype.createBendpoints=function(){var e=[];e=e.concat(this.graphManager.getAllEdges());var i=new Set,t;for(t=0;t<e.length;t++){var a=e[t];if(!i.has(a)){var r=a.getSource(),l=a.getTarget();if(r==l)a.getBendpoints().push(new $),a.getBendpoints().push(new $),this.createDummyNodesForBendpoints(a),i.add(a);else{var h=[];if(h=h.concat(r.getEdgeListToNode(l)),h=h.concat(l.getEdgeListToNode(r)),!i.has(h[0])){if(h.length>1){var c;for(c=0;c<h.length;c++){var E=h[c];E.getBendpoints().push(new $),this.createDummyNodesForBendpoints(E)}}h.forEach(function(m){i.add(m)})}}}if(i.size==e.length)break}},g.prototype.positionNodesRadially=function(e){for(var i=new A(0,0),t=Math.ceil(Math.sqrt(e.length)),a=0,r=0,l=0,h=new $(0,0),c=0;c<e.length;c++){c%t==0&&(l=0,r=a,c!=0&&(r+=Z.DEFAULT_COMPONENT_SEPERATION),a=0);var E=e[c],m=we.findCenterOfTree(E);i.x=l,i.y=r,h=g.radialLayout(E,m,i),h.y>a&&(a=Math.floor(h.y)),l=Math.floor(h.x+Z.DEFAULT_COMPONENT_SEPERATION)}this.transform(new $(ge.WORLD_CENTER_X-h.x/2,ge.WORLD_CENTER_Y-h.y/2))},g.radialLayout=function(e,i,t){var a=Math.max(this.maxDiagonalInTree(e),Z.DEFAULT_RADIAL_SEPARATION);g.branchRadialLayout(i,null,0,359,0,a);var r=n.calculateBounds(e),l=new f;l.setDeviceOrgX(r.getMinX()),l.setDeviceOrgY(r.getMinY()),l.setWorldOrgX(t.x),l.setWorldOrgY(t.y);for(var h=0;h<e.length;h++){var c=e[h];c.transform(l)}var E=new $(r.getMaxX(),r.getMaxY());return l.inverseTransformPoint(E)},g.branchRadialLayout=function(e,i,t,a,r,l){var h=(a-t+1)/2;h<0&&(h+=180);var c=(h+t)%360,E=c*s.TWO_PI/360,m=r*Math.cos(E),b=r*Math.sin(E);e.setCenter(m,b);var w=[];w=w.concat(e.getEdges());var C=w.length;i!=null&&C--;for(var G=0,L=w.length,v,T=e.getEdgesBetween(i);T.length>1;){var x=T[0];T.splice(0,1);var I=w.indexOf(x);I>=0&&w.splice(I,1),L--,C--}i!=null?v=(w.indexOf(T[0])+1)%L:v=0;for(var z=Math.abs(a-t)/C,he=v;G!=C;he=++he%L){var me=w[he].getOtherEnd(e);if(me!=i){var ce=(t+G*z)%360,Ue=(ce+z)%360;g.branchRadialLayout(me,e,ce,Ue,r+l,l),G++}}},g.maxDiagonalInTree=function(e){for(var i=o.MIN_VALUE,t=0;t<e.length;t++){var a=e[t],r=a.getDiagonal();r>i&&(i=r)}return i},g.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},g.prototype.groupZeroDegreeMembers=function(){var e=this,i={};this.memberGroups={},this.idToDummyNode={};for(var t=[],a=this.graphManager.getAllNodes(),r=0;r<a.length;r++){var l=a[r],h=l.getParent();this.getNodeDegreeWithChildren(l)===0&&(h.id==null||!this.getToBeTiled(h))&&t.push(l)}for(var r=0;r<t.length;r++){var l=t[r],c=l.getParent().id;typeof i[c]>"u"&&(i[c]=[]),i[c]=i[c].concat(l)}Object.keys(i).forEach(function(E){if(i[E].length>1){var m="DummyCompound_"+E;e.memberGroups[m]=i[E];var b=i[E][0].getParent(),w=new _(e.graphManager);w.id=m,w.paddingLeft=b.paddingLeft||0,w.paddingRight=b.paddingRight||0,w.paddingBottom=b.paddingBottom||0,w.paddingTop=b.paddingTop||0,e.idToDummyNode[m]=w;var C=e.getGraphManager().add(e.newGraph(),w),G=b.getChild();G.add(w);for(var L=0;L<i[E].length;L++){var v=i[E][L];G.remove(v),C.add(v)}}})},g.prototype.clearCompounds=function(){var e={},i={};this.performDFSOnCompounds();for(var t=0;t<this.compoundOrder.length;t++)i[this.compoundOrder[t].id]=this.compoundOrder[t],e[this.compoundOrder[t].id]=[].concat(this.compoundOrder[t].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[t].getChild()),this.compoundOrder[t].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(e,i)},g.prototype.clearZeroDegreeMembers=function(){var e=this,i=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(t){var a=e.idToDummyNode[t];if(i[t]=e.tileNodes(e.memberGroups[t],a.paddingLeft+a.paddingRight),a.rect.width=i[t].width,a.rect.height=i[t].height,a.setCenter(i[t].centerX,i[t].centerY),a.labelMarginLeft=0,a.labelMarginTop=0,Z.NODE_DIMENSIONS_INCLUDE_LABELS){var r=a.rect.width,l=a.rect.height;a.labelWidth&&(a.labelPosHorizontal=="left"?(a.rect.x-=a.labelWidth,a.setWidth(r+a.labelWidth),a.labelMarginLeft=a.labelWidth):a.labelPosHorizontal=="center"&&a.labelWidth>r?(a.rect.x-=(a.labelWidth-r)/2,a.setWidth(a.labelWidth),a.labelMarginLeft=(a.labelWidth-r)/2):a.labelPosHorizontal=="right"&&a.setWidth(r+a.labelWidth)),a.labelHeight&&(a.labelPosVertical=="top"?(a.rect.y-=a.labelHeight,a.setHeight(l+a.labelHeight),a.labelMarginTop=a.labelHeight):a.labelPosVertical=="center"&&a.labelHeight>l?(a.rect.y-=(a.labelHeight-l)/2,a.setHeight(a.labelHeight),a.labelMarginTop=(a.labelHeight-l)/2):a.labelPosVertical=="bottom"&&a.setHeight(l+a.labelHeight))}})},g.prototype.repopulateCompounds=function(){for(var e=this.compoundOrder.length-1;e>=0;e--){var i=this.compoundOrder[e],t=i.id,a=i.paddingLeft,r=i.paddingTop,l=i.labelMarginLeft,h=i.labelMarginTop;this.adjustLocations(this.tiledMemberPack[t],i.rect.x,i.rect.y,a,r,l,h)}},g.prototype.repopulateZeroDegreeMembers=function(){var e=this,i=this.tiledZeroDegreePack;Object.keys(i).forEach(function(t){var a=e.idToDummyNode[t],r=a.paddingLeft,l=a.paddingTop,h=a.labelMarginLeft,c=a.labelMarginTop;e.adjustLocations(i[t],a.rect.x,a.rect.y,r,l,h,c)})},g.prototype.getToBeTiled=function(e){var i=e.id;if(this.toBeTiled[i]!=null)return this.toBeTiled[i];var t=e.getChild();if(t==null)return this.toBeTiled[i]=!1,!1;for(var a=t.getNodes(),r=0;r<a.length;r++){var l=a[r];if(this.getNodeDegree(l)>0)return this.toBeTiled[i]=!1,!1;if(l.getChild()==null){this.toBeTiled[l.id]=!1;continue}if(!this.getToBeTiled(l))return this.toBeTiled[i]=!1,!1}return this.toBeTiled[i]=!0,!0},g.prototype.getNodeDegree=function(e){e.id;for(var i=e.getEdges(),t=0,a=0;a<i.length;a++){var r=i[a];r.getSource().id!==r.getTarget().id&&(t=t+1)}return t},g.prototype.getNodeDegreeWithChildren=function(e){var i=this.getNodeDegree(e);if(e.getChild()==null)return i;for(var t=e.getChild().getNodes(),a=0;a<t.length;a++){var r=t[a];i+=this.getNodeDegreeWithChildren(r)}return i},g.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},g.prototype.fillCompexOrderByDFS=function(e){for(var i=0;i<e.length;i++){var t=e[i];t.getChild()!=null&&this.fillCompexOrderByDFS(t.getChild().getNodes()),this.getToBeTiled(t)&&this.compoundOrder.push(t)}},g.prototype.adjustLocations=function(e,i,t,a,r,l,h){i+=a+l,t+=r+h;for(var c=i,E=0;E<e.rows.length;E++){var m=e.rows[E];i=c;for(var b=0,w=0;w<m.length;w++){var C=m[w];C.rect.x=i,C.rect.y=t,i+=C.rect.width+e.horizontalPadding,C.rect.height>b&&(b=C.rect.height)}t+=b+e.verticalPadding}},g.prototype.tileCompoundMembers=function(e,i){var t=this;this.tiledMemberPack=[],Object.keys(e).forEach(function(a){var r=i[a];if(t.tiledMemberPack[a]=t.tileNodes(e[a],r.paddingLeft+r.paddingRight),r.rect.width=t.tiledMemberPack[a].width,r.rect.height=t.tiledMemberPack[a].height,r.setCenter(t.tiledMemberPack[a].centerX,t.tiledMemberPack[a].centerY),r.labelMarginLeft=0,r.labelMarginTop=0,Z.NODE_DIMENSIONS_INCLUDE_LABELS){var l=r.rect.width,h=r.rect.height;r.labelWidth&&(r.labelPosHorizontal=="left"?(r.rect.x-=r.labelWidth,r.setWidth(l+r.labelWidth),r.labelMarginLeft=r.labelWidth):r.labelPosHorizontal=="center"&&r.labelWidth>l?(r.rect.x-=(r.labelWidth-l)/2,r.setWidth(r.labelWidth),r.labelMarginLeft=(r.labelWidth-l)/2):r.labelPosHorizontal=="right"&&r.setWidth(l+r.labelWidth)),r.labelHeight&&(r.labelPosVertical=="top"?(r.rect.y-=r.labelHeight,r.setHeight(h+r.labelHeight),r.labelMarginTop=r.labelHeight):r.labelPosVertical=="center"&&r.labelHeight>h?(r.rect.y-=(r.labelHeight-h)/2,r.setHeight(r.labelHeight),r.labelMarginTop=(r.labelHeight-h)/2):r.labelPosVertical=="bottom"&&r.setHeight(h+r.labelHeight))}})},g.prototype.tileNodes=function(e,i){var t=this.tileNodesByFavoringDim(e,i,!0),a=this.tileNodesByFavoringDim(e,i,!1),r=this.getOrgRatio(t),l=this.getOrgRatio(a),h;return l<r?h=a:h=t,h},g.prototype.getOrgRatio=function(e){var i=e.width,t=e.height,a=i/t;return a<1&&(a=1/a),a},g.prototype.calcIdealRowWidth=function(e,i){var t=Z.TILING_PADDING_VERTICAL,a=Z.TILING_PADDING_HORIZONTAL,r=e.length,l=0,h=0,c=0;e.forEach(function(L){l+=L.getWidth(),h+=L.getHeight(),L.getWidth()>c&&(c=L.getWidth())});var E=l/r,m=h/r,b=Math.pow(t-a,2)+4*(E+a)*(m+t)*r,w=(a-t+Math.sqrt(b))/(2*(E+a)),C;i?(C=Math.ceil(w),C==w&&C++):C=Math.floor(w);var G=C*(E+a)-a;return c>G&&(G=c),G+=a*2,G},g.prototype.tileNodesByFavoringDim=function(e,i,t){var a=Z.TILING_PADDING_VERTICAL,r=Z.TILING_PADDING_HORIZONTAL,l=Z.TILING_COMPARE_BY,h={rows:[],rowWidth:[],rowHeight:[],width:0,height:i,verticalPadding:a,horizontalPadding:r,centerX:0,centerY:0};l&&(h.idealRowWidth=this.calcIdealRowWidth(e,t));var c=function(v){return v.rect.width*v.rect.height},E=function(v,T){return c(T)-c(v)};e.sort(function(L,v){var T=E;return h.idealRowWidth?(T=l,T(L.id,v.id)):T(L,v)});for(var m=0,b=0,w=0;w<e.length;w++){var C=e[w];m+=C.getCenterX(),b+=C.getCenterY()}h.centerX=m/e.length,h.centerY=b/e.length;for(var w=0;w<e.length;w++){var C=e[w];if(h.rows.length==0)this.insertNodeToRow(h,C,0,i);else if(this.canAddHorizontal(h,C.rect.width,C.rect.height)){var G=h.rows.length-1;h.idealRowWidth||(G=this.getShortestRowIndex(h)),this.insertNodeToRow(h,C,G,i)}else this.insertNodeToRow(h,C,h.rows.length,i);this.shiftToLastRow(h)}return h},g.prototype.insertNodeToRow=function(e,i,t,a){var r=a;if(t==e.rows.length){var l=[];e.rows.push(l),e.rowWidth.push(r),e.rowHeight.push(0)}var h=e.rowWidth[t]+i.rect.width;e.rows[t].length>0&&(h+=e.horizontalPadding),e.rowWidth[t]=h,e.width<h&&(e.width=h);var c=i.rect.height;t>0&&(c+=e.verticalPadding);var E=0;c>e.rowHeight[t]&&(E=e.rowHeight[t],e.rowHeight[t]=c,E=e.rowHeight[t]-E),e.height+=E,e.rows[t].push(i)},g.prototype.getShortestRowIndex=function(e){for(var i=-1,t=Number.MAX_VALUE,a=0;a<e.rows.length;a++)e.rowWidth[a]<t&&(i=a,t=e.rowWidth[a]);return i},g.prototype.getLongestRowIndex=function(e){for(var i=-1,t=Number.MIN_VALUE,a=0;a<e.rows.length;a++)e.rowWidth[a]>t&&(i=a,t=e.rowWidth[a]);return i},g.prototype.canAddHorizontal=function(e,i,t){if(e.idealRowWidth){var a=e.rows.length-1,r=e.rowWidth[a];return r+i+e.horizontalPadding<=e.idealRowWidth}var l=this.getShortestRowIndex(e);if(l<0)return!0;var h=e.rowWidth[l];if(h+e.horizontalPadding+i<=e.width)return!0;var c=0;e.rowHeight[l]<t&&l>0&&(c=t+e.verticalPadding-e.rowHeight[l]);var E;e.width-h>=i+e.horizontalPadding?E=(e.height+c)/(h+i+e.horizontalPadding):E=(e.height+c)/e.width,c=t+e.verticalPadding;var m;return e.width<i?m=(e.height+c)/i:m=(e.height+c)/e.width,m<1&&(m=1/m),E<1&&(E=1/E),E<m},g.prototype.shiftToLastRow=function(e){var i=this.getLongestRowIndex(e),t=e.rowWidth.length-1,a=e.rows[i],r=a[a.length-1],l=r.width+e.horizontalPadding;if(e.width-e.rowWidth[t]>l&&i!=t){a.splice(-1,1),e.rows[t].push(r),e.rowWidth[i]=e.rowWidth[i]-l,e.rowWidth[t]=e.rowWidth[t]+l,e.width=e.rowWidth[instance.getLongestRowIndex(e)];for(var h=Number.MIN_VALUE,c=0;c<a.length;c++)a[c].height>h&&(h=a[c].height);i>0&&(h+=e.verticalPadding);var E=e.rowHeight[i]+e.rowHeight[t];e.rowHeight[i]=h,e.rowHeight[t]<r.height+e.verticalPadding&&(e.rowHeight[t]=r.height+e.verticalPadding);var m=e.rowHeight[i]+e.rowHeight[t];e.height+=m-E,this.shiftToLastRow(e)}},g.prototype.tilingPreLayout=function(){Z.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},g.prototype.tilingPostLayout=function(){Z.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},g.prototype.reduceTrees=function(){for(var e=[],i=!0,t;i;){var a=this.graphManager.getAllNodes(),r=[];i=!1;for(var l=0;l<a.length;l++)if(t=a[l],t.getEdges().length==1&&!t.getEdges()[0].isInterGraph&&t.getChild()==null){if(Z.PURE_INCREMENTAL){var h=t.getEdges()[0].getOtherEnd(t),c=new u(t.getCenterX()-h.getCenterX(),t.getCenterY()-h.getCenterY());r.push([t,t.getEdges()[0],t.getOwner(),c])}else r.push([t,t.getEdges()[0],t.getOwner()]);i=!0}if(i==!0){for(var E=[],m=0;m<r.length;m++)r[m][0].getEdges().length==1&&(E.push(r[m]),r[m][0].getOwner().remove(r[m][0]));e.push(E),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=e},g.prototype.growTree=function(e){for(var i=e.length,t=e[i-1],a,r=0;r<t.length;r++)a=t[r],this.findPlaceforPrunedNode(a),a[2].add(a[0]),a[2].add(a[1],a[1].source,a[1].target);e.splice(e.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},g.prototype.findPlaceforPrunedNode=function(e){var i,t,a=e[0];if(a==e[1].source?t=e[1].target:t=e[1].source,Z.PURE_INCREMENTAL)a.setCenter(t.getCenterX()+e[3].getWidth(),t.getCenterY()+e[3].getHeight());else{var r=t.startX,l=t.finishX,h=t.startY,c=t.finishY,E=0,m=0,b=0,w=0,C=[E,b,m,w];if(h>0)for(var G=r;G<=l;G++)C[0]+=this.grid[G][h-1].length+this.grid[G][h].length-1;if(l<this.grid.length-1)for(var G=h;G<=c;G++)C[1]+=this.grid[l+1][G].length+this.grid[l][G].length-1;if(c<this.grid[0].length-1)for(var G=r;G<=l;G++)C[2]+=this.grid[G][c+1].length+this.grid[G][c].length-1;if(r>0)for(var G=h;G<=c;G++)C[3]+=this.grid[r-1][G].length+this.grid[r][G].length-1;for(var L=o.MAX_VALUE,v,T,x=0;x<C.length;x++)C[x]<L?(L=C[x],v=1,T=x):C[x]==L&&v++;if(v==3&&L==0)C[0]==0&&C[1]==0&&C[2]==0?i=1:C[0]==0&&C[1]==0&&C[3]==0?i=0:C[0]==0&&C[2]==0&&C[3]==0?i=3:C[1]==0&&C[2]==0&&C[3]==0&&(i=2);else if(v==2&&L==0){var I=Math.floor(Math.random()*2);C[0]==0&&C[1]==0?I==0?i=0:i=1:C[0]==0&&C[2]==0?I==0?i=0:i=2:C[0]==0&&C[3]==0?I==0?i=0:i=3:C[1]==0&&C[2]==0?I==0?i=1:i=2:C[1]==0&&C[3]==0?I==0?i=1:i=3:I==0?i=2:i=3}else if(v==4&&L==0){var I=Math.floor(Math.random()*4);i=I}else i=T;i==0?a.setCenter(t.getCenterX(),t.getCenterY()-t.getHeight()/2-y.DEFAULT_EDGE_LENGTH-a.getHeight()/2):i==1?a.setCenter(t.getCenterX()+t.getWidth()/2+y.DEFAULT_EDGE_LENGTH+a.getWidth()/2,t.getCenterY()):i==2?a.setCenter(t.getCenterX(),t.getCenterY()+t.getHeight()/2+y.DEFAULT_EDGE_LENGTH+a.getHeight()/2):a.setCenter(t.getCenterX()-t.getWidth()/2-y.DEFAULT_EDGE_LENGTH-a.getWidth()/2,t.getCenterY())}},D.exports=g}),991:((D,Q,P)=>{var N=P(551).FDLayoutNode,O=P(551).IMath;function S(j,Z,ne,y){N.call(this,j,Z,ne,y)}S.prototype=Object.create(N.prototype);for(var _ in N)S[_]=N[_];S.prototype.calculateDisplacement=function(){var j=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=j.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=j.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=j.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=j.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>j.coolingFactor*j.maxNodeDisplacement&&(this.displacementX=j.coolingFactor*j.maxNodeDisplacement*O.sign(this.displacementX)),Math.abs(this.displacementY)>j.coolingFactor*j.maxNodeDisplacement&&(this.displacementY=j.coolingFactor*j.maxNodeDisplacement*O.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},S.prototype.propogateDisplacementToChildren=function(j,Z){for(var ne=this.getChild().getNodes(),y,ge=0;ge<ne.length;ge++)y=ne[ge],y.getChild()==null?(y.displacementX+=j,y.displacementY+=Z):y.propogateDisplacementToChildren(j,Z)},S.prototype.move=function(){var j=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),j.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},S.prototype.setPred1=function(j){this.pred1=j},S.prototype.getPred1=function(){return pred1},S.prototype.getPred2=function(){return pred2},S.prototype.setNext=function(j){this.next=j},S.prototype.getNext=function(){return next},S.prototype.setProcessed=function(j){this.processed=j},S.prototype.isProcessed=function(){return processed},D.exports=S}),902:((D,Q,P)=>{function N(ne){if(Array.isArray(ne)){for(var y=0,ge=Array(ne.length);y<ne.length;y++)ge[y]=ne[y];return ge}else return Array.from(ne)}var O=P(806),S=P(551).LinkedList,_=P(551).Matrix,j=P(551).SVD;function Z(){}Z.handleConstraints=function(ne){var y={};y.fixedNodeConstraint=ne.constraints.fixedNodeConstraint,y.alignmentConstraint=ne.constraints.alignmentConstraint,y.relativePlacementConstraint=ne.constraints.relativePlacementConstraint;for(var ge=new Map,A=new Map,$=[],u=[],we=ne.getAllNodes(),o=0,s=0;s<we.length;s++){var n=we[s];n.getChild()==null&&(A.set(n.id,o++),$.push(n.getCenterX()),u.push(n.getCenterY()),ge.set(n.id,n))}y.relativePlacementConstraint&&y.relativePlacementConstraint.forEach(function(p){!p.gap&&p.gap!=0&&(p.left?p.gap=O.DEFAULT_EDGE_LENGTH+ge.get(p.left).getWidth()/2+ge.get(p.right).getWidth()/2:p.gap=O.DEFAULT_EDGE_LENGTH+ge.get(p.top).getHeight()/2+ge.get(p.bottom).getHeight()/2)});var f=function(F,Y){return{x:F.x-Y.x,y:F.y-Y.y}},d=function(F){var Y=0,U=0;return F.forEach(function(W){Y+=$[A.get(W)],U+=u[A.get(W)]}),{x:Y/F.size,y:U/F.size}},g=function(F,Y,U,W,k){function de(q,X){var ie=new Set(q),K=!0,V=!1,ue=void 0;try{for(var fe=X[Symbol.iterator](),Ce;!(K=(Ce=fe.next()).done);K=!0){var Le=Ce.value;ie.add(Le)}}catch(ye){V=!0,ue=ye}finally{try{!K&&fe.return&&fe.return()}finally{if(V)throw ue}}return ie}var ae=new Map;F.forEach(function(q,X){ae.set(X,0)}),F.forEach(function(q,X){q.forEach(function(ie){ae.set(ie.id,ae.get(ie.id)+1)})});var B=new Map,te=new Map,le=new S;ae.forEach(function(q,X){q==0?(le.push(X),U||(Y=="horizontal"?B.set(X,A.has(X)?$[A.get(X)]:W.get(X)):B.set(X,A.has(X)?u[A.get(X)]:W.get(X)))):B.set(X,Number.NEGATIVE_INFINITY),U&&te.set(X,new Set([X]))}),U&&k.forEach(function(q){var X=[];if(q.forEach(function(V){U.has(V)&&X.push(V)}),X.length>0){var ie=0;X.forEach(function(V){Y=="horizontal"?(B.set(V,A.has(V)?$[A.get(V)]:W.get(V)),ie+=B.get(V)):(B.set(V,A.has(V)?u[A.get(V)]:W.get(V)),ie+=B.get(V))}),ie=ie/X.length,q.forEach(function(V){U.has(V)||B.set(V,ie)})}else{var K=0;q.forEach(function(V){Y=="horizontal"?K+=A.has(V)?$[A.get(V)]:W.get(V):K+=A.has(V)?u[A.get(V)]:W.get(V)}),K=K/q.length,q.forEach(function(V){B.set(V,K)})}});for(var Te=function(){var X=le.shift(),ie=F.get(X);ie.forEach(function(K){if(B.get(K.id)<B.get(X)+K.gap)if(U&&U.has(K.id)){var V=void 0;if(Y=="horizontal"?V=A.has(K.id)?$[A.get(K.id)]:W.get(K.id):V=A.has(K.id)?u[A.get(K.id)]:W.get(K.id),B.set(K.id,V),V<B.get(X)+K.gap){var ue=B.get(X)+K.gap-V;te.get(X).forEach(function(fe){B.set(fe,B.get(fe)-ue)})}}else B.set(K.id,B.get(X)+K.gap);ae.set(K.id,ae.get(K.id)-1),ae.get(K.id)==0&&le.push(K.id),U&&te.set(K.id,de(te.get(X),te.get(K.id)))})};le.length!=0;)Te();if(U){var oe=new Set;F.forEach(function(q,X){q.length==0&&oe.add(X)});var Ae=[];te.forEach(function(q,X){if(oe.has(X)){var ie=!1,K=!0,V=!1,ue=void 0;try{for(var fe=q[Symbol.iterator](),Ce;!(K=(Ce=fe.next()).done);K=!0){var Le=Ce.value;U.has(Le)&&(ie=!0)}}catch(pe){V=!0,ue=pe}finally{try{!K&&fe.return&&fe.return()}finally{if(V)throw ue}}if(!ie){var ye=!1,Fe=void 0;Ae.forEach(function(pe,Me){pe.has([].concat(N(q))[0])&&(ye=!0,Fe=Me)}),ye?q.forEach(function(pe){Ae[Fe].add(pe)}):Ae.push(new Set(q))}}}),Ae.forEach(function(q,X){var ie=Number.POSITIVE_INFINITY,K=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,ue=Number.NEGATIVE_INFINITY,fe=!0,Ce=!1,Le=void 0;try{for(var ye=q[Symbol.iterator](),Fe;!(fe=(Fe=ye.next()).done);fe=!0){var pe=Fe.value,Me=void 0;Y=="horizontal"?Me=A.has(pe)?$[A.get(pe)]:W.get(pe):Me=A.has(pe)?u[A.get(pe)]:W.get(pe);var Se=B.get(pe);Me<ie&&(ie=Me),Me>V&&(V=Me),Se<K&&(K=Se),Se>ue&&(ue=Se)}}catch(We){Ce=!0,Le=We}finally{try{!fe&&ye.return&&ye.return()}finally{if(Ce)throw Le}}var ke=(ie+V)/2-(K+ue)/2,Pe=!0,xe=!1,He=void 0;try{for(var Oe=q[Symbol.iterator](),Be;!(Pe=(Be=Oe.next()).done);Pe=!0){var be=Be.value;B.set(be,B.get(be)+ke)}}catch(We){xe=!0,He=We}finally{try{!Pe&&Oe.return&&Oe.return()}finally{if(xe)throw He}}})}return B},M=function(F){var Y=0,U=0,W=0,k=0;if(F.forEach(function(te){te.left?$[A.get(te.left)]-$[A.get(te.right)]>=0?Y++:U++:u[A.get(te.top)]-u[A.get(te.bottom)]>=0?W++:k++}),Y>U&&W>k)for(var de=0;de<A.size;de++)$[de]=-1*$[de],u[de]=-1*u[de];else if(Y>U)for(var ae=0;ae<A.size;ae++)$[ae]=-1*$[ae];else if(W>k)for(var B=0;B<A.size;B++)u[B]=-1*u[B]},e=function(F){var Y=[],U=new S,W=new Set,k=0;return F.forEach(function(de,ae){if(!W.has(ae)){Y[k]=[];var B=ae;for(U.push(B),W.add(B),Y[k].push(B);U.length!=0;){B=U.shift();var te=F.get(B);te.forEach(function(le){W.has(le.id)||(U.push(le.id),W.add(le.id),Y[k].push(le.id))})}k++}}),Y},i=function(F){var Y=new Map;return F.forEach(function(U,W){Y.set(W,[])}),F.forEach(function(U,W){U.forEach(function(k){Y.get(W).push(k),Y.get(k.id).push({id:W,gap:k.gap,direction:k.direction})})}),Y},t=function(F){var Y=new Map;return F.forEach(function(U,W){Y.set(W,[])}),F.forEach(function(U,W){U.forEach(function(k){Y.get(k.id).push({id:W,gap:k.gap,direction:k.direction})})}),Y},a=[],r=[],l=!1,h=!1,c=new Set,E=new Map,m=new Map,b=[];if(y.fixedNodeConstraint&&y.fixedNodeConstraint.forEach(function(p){c.add(p.nodeId)}),y.relativePlacementConstraint&&(y.relativePlacementConstraint.forEach(function(p){p.left?(E.has(p.left)?E.get(p.left).push({id:p.right,gap:p.gap,direction:"horizontal"}):E.set(p.left,[{id:p.right,gap:p.gap,direction:"horizontal"}]),E.has(p.right)||E.set(p.right,[])):(E.has(p.top)?E.get(p.top).push({id:p.bottom,gap:p.gap,direction:"vertical"}):E.set(p.top,[{id:p.bottom,gap:p.gap,direction:"vertical"}]),E.has(p.bottom)||E.set(p.bottom,[]))}),m=i(E),b=e(m)),O.TRANSFORM_ON_CONSTRAINT_HANDLING){if(y.fixedNodeConstraint&&y.fixedNodeConstraint.length>1)y.fixedNodeConstraint.forEach(function(p,F){a[F]=[p.position.x,p.position.y],r[F]=[$[A.get(p.nodeId)],u[A.get(p.nodeId)]]}),l=!0;else if(y.alignmentConstraint)(function(){var p=0;if(y.alignmentConstraint.vertical){for(var F=y.alignmentConstraint.vertical,Y=function(B){var te=new Set;F[B].forEach(function(oe){te.add(oe)});var le=new Set([].concat(N(te)).filter(function(oe){return c.has(oe)})),Te=void 0;le.size>0?Te=$[A.get(le.values().next().value)]:Te=d(te).x,F[B].forEach(function(oe){a[p]=[Te,u[A.get(oe)]],r[p]=[$[A.get(oe)],u[A.get(oe)]],p++})},U=0;U<F.length;U++)Y(U);l=!0}if(y.alignmentConstraint.horizontal){for(var W=y.alignmentConstraint.horizontal,k=function(B){var te=new Set;W[B].forEach(function(oe){te.add(oe)});var le=new Set([].concat(N(te)).filter(function(oe){return c.has(oe)})),Te=void 0;le.size>0?Te=$[A.get(le.values().next().value)]:Te=d(te).y,W[B].forEach(function(oe){a[p]=[$[A.get(oe)],Te],r[p]=[$[A.get(oe)],u[A.get(oe)]],p++})},de=0;de<W.length;de++)k(de);l=!0}y.relativePlacementConstraint&&(h=!0)})();else if(y.relativePlacementConstraint){for(var w=0,C=0,G=0;G<b.length;G++)b[G].length>w&&(w=b[G].length,C=G);if(w<m.size/2)M(y.relativePlacementConstraint),l=!1,h=!1;else{var L=new Map,v=new Map,T=[];b[C].forEach(function(p){E.get(p).forEach(function(F){F.direction=="horizontal"?(L.has(p)?L.get(p).push(F):L.set(p,[F]),L.has(F.id)||L.set(F.id,[]),T.push({left:p,right:F.id})):(v.has(p)?v.get(p).push(F):v.set(p,[F]),v.has(F.id)||v.set(F.id,[]),T.push({top:p,bottom:F.id}))})}),M(T),h=!1;var x=g(L,"horizontal"),I=g(v,"vertical");b[C].forEach(function(p,F){r[F]=[$[A.get(p)],u[A.get(p)]],a[F]=[],x.has(p)?a[F][0]=x.get(p):a[F][0]=$[A.get(p)],I.has(p)?a[F][1]=I.get(p):a[F][1]=u[A.get(p)]}),l=!0}}if(l){for(var z=void 0,he=_.transpose(a),me=_.transpose(r),ce=0;ce<he.length;ce++)he[ce]=_.multGamma(he[ce]),me[ce]=_.multGamma(me[ce]);var Ue=_.multMat(he,_.transpose(me)),Ye=j.svd(Ue);z=_.multMat(Ye.V,_.transpose(Ye.U));for(var Ee=0;Ee<A.size;Ee++){var Xe=[$[Ee],u[Ee]],Re=[z[0][0],z[1][0]],ft=[z[0][1],z[1][1]];$[Ee]=_.dotProduct(Xe,Re),u[Ee]=_.dotProduct(Xe,ft)}h&&M(y.relativePlacementConstraint)}}if(O.ENFORCE_CONSTRAINTS){if(y.fixedNodeConstraint&&y.fixedNodeConstraint.length>0){var Ge={x:0,y:0};y.fixedNodeConstraint.forEach(function(p,F){var Y={x:$[A.get(p.nodeId)],y:u[A.get(p.nodeId)]},U=p.position,W=f(U,Y);Ge.x+=W.x,Ge.y+=W.y}),Ge.x/=y.fixedNodeConstraint.length,Ge.y/=y.fixedNodeConstraint.length,$.forEach(function(p,F){$[F]+=Ge.x}),u.forEach(function(p,F){u[F]+=Ge.y}),y.fixedNodeConstraint.forEach(function(p){$[A.get(p.nodeId)]=p.position.x,u[A.get(p.nodeId)]=p.position.y})}if(y.alignmentConstraint){if(y.alignmentConstraint.vertical)for(var tt=y.alignmentConstraint.vertical,dt=function(F){var Y=new Set;tt[F].forEach(function(k){Y.add(k)});var U=new Set([].concat(N(Y)).filter(function(k){return c.has(k)})),W=void 0;U.size>0?W=$[A.get(U.values().next().value)]:W=d(Y).x,Y.forEach(function(k){c.has(k)||($[A.get(k)]=W)})},Qe=0;Qe<tt.length;Qe++)dt(Qe);if(y.alignmentConstraint.horizontal)for(var rt=y.alignmentConstraint.horizontal,vt=function(F){var Y=new Set;rt[F].forEach(function(k){Y.add(k)});var U=new Set([].concat(N(Y)).filter(function(k){return c.has(k)})),W=void 0;U.size>0?W=u[A.get(U.values().next().value)]:W=d(Y).y,Y.forEach(function(k){c.has(k)||(u[A.get(k)]=W)})},Je=0;Je<rt.length;Je++)vt(Je)}y.relativePlacementConstraint&&(function(){var p=new Map,F=new Map,Y=new Map,U=new Map,W=new Map,k=new Map,de=new Set,ae=new Set;if(c.forEach(function(ve){de.add(ve),ae.add(ve)}),y.alignmentConstraint){if(y.alignmentConstraint.vertical)for(var B=y.alignmentConstraint.vertical,te=function(J){Y.set("dummy"+J,[]),B[J].forEach(function(ee){p.set(ee,"dummy"+J),Y.get("dummy"+J).push(ee),c.has(ee)&&de.add("dummy"+J)}),W.set("dummy"+J,$[A.get(B[J][0])])},le=0;le<B.length;le++)te(le);if(y.alignmentConstraint.horizontal)for(var Te=y.alignmentConstraint.horizontal,oe=function(J){U.set("dummy"+J,[]),Te[J].forEach(function(ee){F.set(ee,"dummy"+J),U.get("dummy"+J).push(ee),c.has(ee)&&ae.add("dummy"+J)}),k.set("dummy"+J,u[A.get(Te[J][0])])},Ae=0;Ae<Te.length;Ae++)oe(Ae)}var q=new Map,X=new Map,ie=function(J){E.get(J).forEach(function(ee){var De=void 0,Ne=void 0;ee.direction=="horizontal"?(De=p.get(J)?p.get(J):J,p.get(ee.id)?Ne={id:p.get(ee.id),gap:ee.gap,direction:ee.direction}:Ne=ee,q.has(De)?q.get(De).push(Ne):q.set(De,[Ne]),q.has(Ne.id)||q.set(Ne.id,[])):(De=F.get(J)?F.get(J):J,F.get(ee.id)?Ne={id:F.get(ee.id),gap:ee.gap,direction:ee.direction}:Ne=ee,X.has(De)?X.get(De).push(Ne):X.set(De,[Ne]),X.has(Ne.id)||X.set(Ne.id,[]))})},K=!0,V=!1,ue=void 0;try{for(var fe=E.keys()[Symbol.iterator](),Ce;!(K=(Ce=fe.next()).done);K=!0){var Le=Ce.value;ie(Le)}}catch(ve){V=!0,ue=ve}finally{try{!K&&fe.return&&fe.return()}finally{if(V)throw ue}}var ye=i(q),Fe=i(X),pe=e(ye),Me=e(Fe),Se=t(q),ke=t(X),Pe=[],xe=[];pe.forEach(function(ve,J){Pe[J]=[],ve.forEach(function(ee){Se.get(ee).length==0&&Pe[J].push(ee)})}),Me.forEach(function(ve,J){xe[J]=[],ve.forEach(function(ee){ke.get(ee).length==0&&xe[J].push(ee)})});var He=g(q,"horizontal",de,W,Pe),Oe=g(X,"vertical",ae,k,xe),Be=function(J){Y.get(J)?Y.get(J).forEach(function(ee){$[A.get(ee)]=He.get(J)}):$[A.get(J)]=He.get(J)},be=!0,We=!1,it=void 0;try{for(var _e=He.keys()[Symbol.iterator](),at;!(be=(at=_e.next()).done);be=!0){var ze=at.value;Be(ze)}}catch(ve){We=!0,it=ve}finally{try{!be&&_e.return&&_e.return()}finally{if(We)throw it}}var ct=function(J){U.get(J)?U.get(J).forEach(function(ee){u[A.get(ee)]=Oe.get(J)}):u[A.get(J)]=Oe.get(J)},qe=!0,ot=!1,st=void 0;try{for(var et=Oe.keys()[Symbol.iterator](),nt;!(qe=(nt=et.next()).done);qe=!0){var ze=nt.value;ct(ze)}}catch(ve){ot=!0,st=ve}finally{try{!qe&&et.return&&et.return()}finally{if(ot)throw st}}})()}for(var je=0;je<we.length;je++){var Ve=we[je];Ve.getChild()==null&&Ve.setCenter($[A.get(Ve.id)],u[A.get(Ve.id)])}},D.exports=Z}),551:(D=>{D.exports=Ie})},se={};function H(D){var Q=se[D];if(Q!==void 0)return Q.exports;var P=se[D]={exports:{}};return re[D](P,P.exports,H),P.exports}var R=H(45);return R})()})})($e)),$e.exports}export{Ct as a,mt as r};
