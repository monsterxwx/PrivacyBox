import{L as N,r as u,c as s,a as e,x as I,j as g,F as D,l as z,q as G,T as K,E as A,X as U,Z as O,H as Y,t as b,n as T,o as l,G as $,y as J}from"./@vue-vD6pU9gy.js";import"./stream-markdown-parser-BSyVrJ50.js";import{q as P}from"./markstream-vue-Bm7Vbs8o.js";import"./katex-C1KM518e.js";import{_ as X}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./@mermaid-js-BAp2aObr.js";import"./langium-DJMK8hyp.js";import"./vscode-jsonrpc-CNa_m3dn.js";import"./chevrotain-BCfWnvdc.js";import"./@chevrotain-B9w1F9z3.js";import"./lodash-es-0h6_uya3.js";import"./chevrotain-allstar-DPtXl-ZX.js";import"./vscode-languageserver-types-NoPvPymt.js";import"./vscode-languageserver-textdocument-CKBVUiR3.js";import"./vscode-uri-DEqhlMU_.js";import"./@floating-ui-BV8iGD7x.js";const L={mita:{url:"https://metaso.cn/api/v1/chat/completions",token:"Bearer mk-A20C35399148D55F4D07B5E42E53565A",data:(a,n)=>{const{deepThink:i}=n;return{model:i?"ds-r1":"fast_thinking",stream:!0,messages:[{role:"user",content:a}]}}},"hunyuan-turbo":{url:"https://api.hunyuan.cloud.tencent.com/v1/chat/completions",token:"Bearer sk-V7fvIXNVENUSw6YJGzotycNxaMX7AYbj0tYlwkIHYS7txRgo",data:a=>({model:"hunyuan-turbo-latest",stream:!0,messages:[{role:"user",content:a}],enable_enhancement:!0})},kimi:{url:"https://api.moonshot.cn/v1/chat/completions",token:"Bearer sk-y67lAVcxp7fCakUgbrftUREpMnFRZGb5S4M4D2tA07qdkwru",data:(a,n)=>{const{deepThink:i}=n;return{model:i?"kimi-thinking-preview":"kimi-k2-0905-preview",stream:!0,messages:[{role:"user",content:a}],temperature:.6}}},qwen:{url:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",token:"Bearer sk-46ce67987dcb475ca8e0e5b17eab3551",data:(a,n)=>{const{deepThink:i}=n;return{model:"qwen-plus",stream:!0,enable_thinking:i||!1,messages:[{role:"user",content:a}],stream_options:{include_usage:!0}}}},doubao:{url:"https://ark.cn-beijing.volces.com/api/v3/chat/completions",token:"Bearer e53d18e5-3157-47f2-8ab7-cfb7a4475033",data:(a,n)=>{const{deepThink:i}=n;return{model:i?"doubao-seed-1-6-thinking-250715":"doubao-seed-1-6-flash-250828",stream:!0,messages:[{role:"user",content:a}]}}},"deepseek-r1":{url:"https://ark.cn-beijing.volces.com/api/v3/chat/completions",token:"Bearer e53d18e5-3157-47f2-8ab7-cfb7a4475033",data:(a,n)=>({model:"deepseek-r1-250528",stream:!0,messages:[{role:"user",content:a}]})},GLM:{url:"https://open.bigmodel.cn/api/paas/v4/chat/completions",token:"Bearer 841c061d0cc8497cb51adb559b06da67.rEnPiBDBg8oahmA5",data:(a,n)=>({model:"glm-4.6",stream:!0,messages:[{role:"user",content:a}],temperature:.6})}},Z=async(a,n,i={})=>{const{deepThink:k=!1,modelType:d,scrollFunc:c}=i,v=await fetch(L[d].url,{method:"POST",headers:{"Content-Type":"application/json",Authorization:L[d].token},body:JSON.stringify(L[d].data(a,i))});if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);const w=v.body.getReader(),x=new TextDecoder("utf-8");let h=!1,C="";for(;!h;){const{value:M,done:j}=await w.read();if(h=j,M){C+=x.decode(M,{stream:!0});const E=C.split(`
`);C=E.pop()||"";for(const B of E)if(B.startsWith("data:")){const y=B.slice(5).trim();if(y==="[DONE]"){h=!0;break}const m=JSON.parse(y);if(m.choices&&m.choices[0]&&m.choices[0].delta){const p=m.choices[0].delta,f=n.value[n.value.length-1];p.citations&&(f.citations=p.citations),p.reasoning_content&&(f.think+=p.reasoning_content,c&&N(()=>c())),p.content&&(f.isThinkExpanded&&(f.isThinkExpanded=!1),f.content+=p.content,c&&N(()=>c())),p.highlights&&(f.highlights=p.highlights)}}}}n.value[n.value.length-1].isDone=h,console.log(" messages.value",n.value)},Q={class:"flex flex-col h-100% bg-[#f9f9f9] text-slate-800 font-sans overflow-hidden relative"},W={class:"max-w-3xl mx-auto space-y-8 pt-6"},ee={key:0,class:"mt-20 px-6"},te={class:"grid grid-cols-2 gap-3"},oe=["onClick"],ne={key:0,class:"text-xs text-gray-500"},se=["src"],le={class:"max-w-[85%] space-y-1"},re={key:0,class:"text-[14px] my-8px text-gray-400 flex items-center gap-2 h-4"},ae={key:1,class:"bg-white select-none p-3 rounded-lg text-gray-600 text-sm leading-6 mb-2 border border-gray-200 shadow-sm"},ie=["onClick"],de={key:2,class:"flex flex-col gap-5px mb-10px max-w-90% text-14px color-#00000099"},ce=["onClick"],ue={class:"flex-[1_0] min-w-0 truncate cursor-pointer"},pe={key:0},he={key:3,class:"thinking-indicator"},me={class:"fixed bottom-0 left-0 w-full px-4 pb-20px z-30 pointer-events-none bg-#f9f9f9"},ve={class:"max-w-3xl mx-auto pointer-events-auto"},xe={class:"bg-white rounded-[32px] border border-gray-200 shadow-[0_4px_24px_rgba(0,0,0,0.05)] p-2 transition-shadow duration-300 focus-within:shadow-[0_8px_32px_rgba(0,0,0,0.08)] focus-within:border-gray-300 relative"},fe=["onKeydown"],ge={class:"flex items-center justify-between px-5 pb-1 mt-1"},be={class:"relative flex items-center gap-15px"},ke=["src"],we={key:0,class:"absolute bottom-full mb-2 right-0 w-40 bg-white border border-gray-100 rounded-lg shadow-xl py-1 overflow-hidden z-50"},ye=["onClick"],_e=["src"],Te={class:"flex items-center gap-3"},Ce=["disabled"],Be={key:0,class:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Me={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Ee={__name:"index",setup(a){const n=u(null),i=u(null),k=u([]),d=u(""),c=u(!1),v=u(!1),w=u("mita"),x=u(!1),h=u(!1),C=()=>{h.value=!h.value},M=u(["写一个 Vue3 的 ToDo List 组件","解释一下量子纠缠"]),j=r=>{d.value=r,q()},E=r=>{r.link&&window.open(r.link,"_blank")},B=u([{name:"秘塔",value:"mita",url:"https://ai-bot.cn/wp-content/uploads/2024/06/metaso-ai-search-icon.png"},{name:"混元",value:"hunyuan-turbo",url:"https://ai-bot.cn/wp-content/uploads/2023/09/hunyuan-tencent-icon.png"},{name:"Kimi",value:"kimi",url:"https://ai-bot.cn/wp-content/uploads/2024/05/kimi-ai-logo.png"},{name:"千问",value:"qwen",url:"https://ai-bot.cn/wp-content/uploads/2025/09/tongyi-icon.png"},{name:"豆包",value:"doubao",url:"https://ai-bot.cn/wp-content/uploads/2023/08/doubao-icon.png"},{name:"DeepSeek-R1",value:"deepseek-r1",url:"https://ai-bot.cn/wp-content/uploads/2023/11/deepseek-chat-icon.png"},{name:"GLM-4.6",value:"GLM",url:"https://ai-bot.cn/wp-content/uploads/2023/08/zhipu-ai-chatglm-icon.png"}]),y=r=>B.value.find(t=>t.value===r)||"";let m=!0;const p=r=>{w.value=r.value,x.value=!1},f=r=>{r.shiftKey||q()},F=()=>{const r=n.value;if(!r)return;r.scrollHeight-r.scrollTop-r.clientHeight>100?(m=!1,k.value.length>0&&(v.value=!0)):(m=!0,v.value=!1)},R=async()=>{m=!0,v.value=!1,await N(),n.value&&n.value.scrollTo({top:n.value.scrollHeight,behavior:"smooth"})},V=()=>{m&&n.value&&(n.value.scrollTop=n.value.scrollHeight)},q=async()=>{const r=d.value.trim();!r||c.value||(k.value.push({role:"user",content:r}),d.value="",i.value&&(i.value.style.height="auto"),k.value.push({role:"assistant",modelName:w.value,content:"",think:"",isDone:!1,isThinkExpanded:!0}),await R(),c.value=!0,await Z(r,k,{deepThink:h.value,modelType:w.value,scrollFunc:V}),c.value=!1,N(()=>V()))};return(r,o)=>(l(),s("div",Q,[e("main",{ref_key:"scrollContainer",ref:n,onScroll:F,class:"flex-[1_0] min-h-0 overflow-y-auto px-4 sm:px-0 pb-56 scroll-smooth custom-scrollbar"},[e("div",W,[k.value.length===0?(l(),s("div",ee,[o[3]||(o[3]=e("div",{class:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm mb-8"},[e("h1",{class:"text-2xl font-bold text-gray-800 mb-2"}," 你好，我是 AI 助手 "),e("p",{class:"text-gray-500 leading-relaxed"}," 我可以帮你写代码、分析数据、或者只是聊聊天。试着在下方输入框提问吧。 ")],-1)),e("div",te,[(l(!0),s(D,null,z(M.value,t=>(l(),s("div",{onClick:S=>j(t),key:t,class:"p-4 bg-white border border-gray-100 rounded-xl hover:border-gray-300 cursor-pointer transition-colors text-sm text-gray-600"},b(t),9,oe))),128))])])):g("",!0),(l(!0),s(D,null,z(k.value,(t,S)=>(l(),s("div",{key:S,class:"px-4 sm:px-0 group fade-in"},[e("div",{class:T(["flex gap-4",t.role==="user"?"flex-row-reverse":"flex-row"])},[e("div",{class:T(["flex-none w-8 h-8 rounded-full flex items-center justify-center shrink-0 overflow-hidden",t.role==="user"?"bg-gray-200":""])},[t.role==="user"?(l(),s("span",ne,"U")):(l(),s("img",{key:1,src:y(t.modelName).url,class:"w-8 h-8 rounded-full"},null,8,se))],2),e("div",le,[t.role==="assistant"?(l(),s("div",re,[e("span",null,b(y(t.modelName).name),1)])):g("",!0),t.think?(l(),s("div",ae,[e("div",{class:"flex items-center justify-between cursor-pointer hover:bg-gray-50 p-2 rounded transition-colors",onClick:_=>t.isThinkExpanded=!t.isThinkExpanded},[o[5]||(o[5]=e("span",{class:"font-medium text-gray-700"},"思考过程",-1)),(l(),s("svg",{class:T(["w-4 h-4 transition-transform duration-200",{"rotate-180":t.isThinkExpanded}]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[...o[4]||(o[4]=[e("path",{d:"m6 9 6 6 6-6"},null,-1)])],2))],8,ie),A(e("div",{class:"mt-2 pt-2 border-t border-gray-100 text-#00000099"},b(t.think),513),[[$,t.isThinkExpanded]])])):g("",!0),e("div",{class:T(["prose prose-slate prose-sm max-w-none leading-7 text-[15px]",t.role==="user"?"bg-[#e7e7e7] px-4  rounded-2xl rounded-tr-sm text-gray-800":"bg-transparent text-gray-800"])},[I(J(P),{content:t.content},null,8,["content"])],2),t.citations&&t.citations.length>0&&t.isDone?(l(),s("div",de,[o[6]||(o[6]=e("div",{class:"font-bold text-16px color-#000000 py-5px"}," 来源 ",-1)),(l(!0),s(D,null,z(t.citations,(_,H)=>(l(),s("div",{onClick:Se=>E(_),class:"flex text-14px",key:H},[e("div",null,b(H+1)+".",1),e("div",ue,b(_.title),1),_.date?(l(),s("div",pe," ["+b(_.date)+"] ",1)):g("",!0)],8,ce))),128))])):g("",!0),t.role!=="user"&&!t.isDone&&!t.content&&!t.think?(l(),s("div",he,[...o[7]||(o[7]=[e("span",{class:"dot"},null,-1),e("span",{class:"dot"},null,-1),e("span",{class:"dot"},null,-1)])])):g("",!0)])],2)]))),128))])],544),I(K,{name:"fade"},{default:G(()=>[A(e("button",{onClick:R,class:"absolute bottom-48 left-1/2 -translate-x-1/2 bg-white text-gray-600 border border-gray-200 shadow-lg rounded-full px-4 py-2 z-20 flex items-center gap-2 hover:bg-gray-50 hover:text-black transition-all"},[...o[8]||(o[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M12 5v14"}),e("path",{d:"m19 12-7 7-7-7"})],-1)])],512),[[$,v.value]])]),_:1}),e("div",me,[e("div",ve,[e("div",xe,[A(e("textarea",{"onUpdate:modelValue":o[0]||(o[0]=t=>d.value=t),onKeydown:O(Y(f,["prevent"]),["enter"]),placeholder:"尽管问...",rows:"1",ref_key:"textareaRef",ref:i,class:"w-full custom-scrollbar border-none! bg-transparent text-gray-800 placeholder:text-gray-400 px-4 py-3 min-h-[56px] max-h-[200px] outline-none resize-none text-base",style:{"field-sizing":"content"}},null,40,fe),[[U,d.value]]),e("div",ge,[e("div",be,[e("button",{onClick:o[1]||(o[1]=t=>x.value=!x.value),class:"flex items-center gap-1 text-gray-500 hover:text-black font-medium text-sm px-4 py-1 rounded-lg hover:bg-gray-100 transition-colors"},[e("img",{src:y(w.value).url,alt:"模型图标",class:"w-4 h-4 rounded-full mr-2"},null,8,ke),e("div",null,b(y(w.value).name),1),o[9]||(o[9]=e("svg",{class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"m6 9 6 6 6-6"})],-1))]),e("div",{onClick:C,class:T([[h.value?"border-color-#1677ff! text-#1677ff":""],"flex items-center gap-5px select-none cursor-pointer border-color-#e4e4e4 border-1px border-solid color-#00000099 p-[5px_8px] text-14px font-700 border-rd-999px"])},[...o[10]||(o[10]=[e("svg",{class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5003",width:"18",height:"18",fill:"currentColor"},[e("path",{d:"M168.618667 168.618667c94.776889-94.833778 325.461333-17.92 515.072 171.690666 189.667556 189.667556 266.581333 420.238222 171.747555 515.128889-94.890667 94.833778-325.404444 17.92-515.128889-171.747555C150.641778 494.08 73.784889 263.395556 168.618667 168.618667z m469.845333 216.974222C470.641778 217.770667 275.171556 152.576 213.902222 213.902222c-61.326222 61.269333 3.811556 256.682667 171.690667 424.561778 167.879111 167.822222 363.292444 232.96 424.561778 171.690667 61.326222-61.269333-3.811556-256.682667-171.690667-424.561778z","p-id":"5004"}),e("path",{d:"M340.309333 340.252444c189.667556-189.610667 420.295111-266.467556 515.128889-171.633777 94.833778 94.776889 17.92 325.404444-171.747555 515.072-189.610667 189.667556-420.295111 266.581333-515.072 171.747555-94.833778-94.890667-17.92-325.518222 171.690666-515.185778z m469.902223-126.350222c-61.326222-61.326222-256.739556 3.811556-424.618667 171.690667-167.822222 167.822222-233.016889 363.178667-171.690667 424.561778 61.269333 61.326222 256.682667-3.811556 424.561778-171.690667 167.822222-167.879111 232.96-363.292444 171.690667-424.561778z","p-id":"5005"}),e("path",{d:"M442.595556 512a69.404444 69.404444 0 1 0 138.808888 0 69.404444 69.404444 0 0 0-138.808888 0z","p-id":"5006"})],-1),e("div",null,"深度思考",-1)])],2),x.value?(l(),s("div",we,[(l(!0),s(D,null,z(B.value,(t,S)=>(l(),s("div",{key:S,onClick:_=>p(t),class:"px-4 py-2 hover:bg-gray-50 text-sm cursor-pointer flex items-center gap-5px"},[e("img",{src:t.url,alt:"模型图标",class:"w-4 h-4 rounded-full mr-2"},null,8,_e),e("div",null,b(t.name),1)],8,ye))),128))])):g("",!0)]),e("div",Te,[e("button",{onClick:q,disabled:!d.value.trim()||c.value,class:T(["w-8 h-8 rounded-full flex items-center justify-center transition-all duration-200 ml-1",!d.value.trim()||c.value?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-black text-white hover:opacity-80 active:scale-95 shadow-md"])},[c.value?(l(),s("svg",Be,[...o[11]||(o[11]=[e("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"},null,-1)])])):(l(),s("svg",Me,[...o[12]||(o[12]=[e("line",{x1:"12",x2:"12",y1:"19",y2:"5"},null,-1),e("polyline",{points:"5 12 12 5 19 12"},null,-1)])]))],10,Ce)])])]),o[13]||(o[13]=e("div",{class:"text-center mt-3 text-[11px] text-gray-400"}," 内容由 AI 生成，请仔细甄别 ",-1))]),x.value?(l(),s("div",{key:0,onClick:o[2]||(o[2]=t=>x.value=!1),class:"fixed inset-0 z-40 bg-transparent"})):g("",!0)])]))}},Oe=X(Ee,[["__scopeId","data-v-5813d53e"]]);export{Oe as default};
