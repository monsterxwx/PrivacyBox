import{r as P,c as H,a as E,b as u,l as V,j as W,m as J,f as T,h as $,y as B,n as X,t as F,G,F as K,g as Q,o as D}from"./index-547FBy8I.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";var q=function(p,v){return p<v?-1:p>v?1:0},S=function(p){return p.reduce(function(v,b){return v+b},0)},Z=(function(){function p(b){this.colors=b}var v=p.prototype;return v.palette=function(){return this.colors},v.map=function(b){return b},p})(),O=(function(){function p(o,t,s){return(o<<10)+(t<<5)+s}function v(o){var t=[],s=!1;function r(){t.sort(o),s=!0}return{push:function(l){t.push(l),s=!1},peek:function(l){return s||r(),l===void 0&&(l=t.length-1),t[l]},pop:function(){return s||r(),t.pop()},size:function(){return t.length},map:function(l){return t.map(l)},debug:function(){return s||r(),t}}}function b(o,t,s,r,l,n,d){var c=this;c.r1=o,c.r2=t,c.g1=s,c.g2=r,c.b1=l,c.b2=n,c.histo=d}function k(){this.vboxes=new v(function(o,t){return q(o.vbox.count()*o.vbox.volume(),t.vbox.count()*t.vbox.volume())})}function w(o,t){if(t.count()){var s=t.r2-t.r1+1,r=t.g2-t.g1+1,l=Math.max.apply(null,[s,r,t.b2-t.b1+1]);if(t.count()==1)return[t.copy()];var n,d,c,m,y=0,h=[],C=[];if(l==s)for(n=t.r1;n<=t.r2;n++){for(m=0,d=t.g1;d<=t.g2;d++)for(c=t.b1;c<=t.b2;c++)m+=o[p(n,d,c)]||0;h[n]=y+=m}else if(l==r)for(n=t.g1;n<=t.g2;n++){for(m=0,d=t.r1;d<=t.r2;d++)for(c=t.b1;c<=t.b2;c++)m+=o[p(d,n,c)]||0;h[n]=y+=m}else for(n=t.b1;n<=t.b2;n++){for(m=0,d=t.r1;d<=t.r2;d++)for(c=t.g1;c<=t.g2;c++)m+=o[p(d,c,n)]||0;h[n]=y+=m}return h.forEach(function(_,a){C[a]=y-_}),(function(_){var a,e,f,g,x,z=_+"1",I=_+"2",M=0;for(n=t[z];n<=t[I];n++)if(h[n]>y/2){for(f=t.copy(),g=t.copy(),x=(a=n-t[z])<=(e=t[I]-n)?Math.min(t[I]-1,~~(n+e/2)):Math.max(t[z],~~(n-1-a/2));!h[x];)x++;for(M=C[x];!M&&h[x-1];)M=C[--x];return f[I]=x,g[z]=f[I]+1,[f,g]}})(l==s?"r":l==r?"g":"b")}}return b.prototype={volume:function(o){var t=this;return t._volume&&!o||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(o){var t=this,s=t.histo;if(!t._count_set||o){var r,l,n,d=0;for(r=t.r1;r<=t.r2;r++)for(l=t.g1;l<=t.g2;l++)for(n=t.b1;n<=t.b2;n++)d+=s[p(r,l,n)]||0;t._count=d,t._count_set=!0}return t._count},copy:function(){var o=this;return new b(o.r1,o.r2,o.g1,o.g2,o.b1,o.b2,o.histo)},avg:function(o){var t=this,s=t.histo;if(!t._avg||o){var r,l,n,d,c=0,m=0,y=0,h=0;if(t.r1===t.r2&&t.g1===t.g2&&t.b1===t.b2)t._avg=[t.r1<<3,t.g1<<3,t.b1<<3];else{for(l=t.r1;l<=t.r2;l++)for(n=t.g1;n<=t.g2;n++)for(d=t.b1;d<=t.b2;d++)c+=r=s[p(l,n,d)]||0,m+=r*(l+.5)*8,y+=r*(n+.5)*8,h+=r*(d+.5)*8;t._avg=c?[~~(m/c),~~(y/c),~~(h/c)]:[~~(8*(t.r1+t.r2+1)/2),~~(8*(t.g1+t.g2+1)/2),~~(8*(t.b1+t.b2+1)/2)]}}return t._avg},contains:function(o){var t=this,s=o[0]>>3;return gval=o[1]>>3,bval=o[2]>>3,s>=t.r1&&s<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},k.prototype={push:function(o){this.vboxes.push({vbox:o,color:o.avg()})},palette:function(){return this.vboxes.map(function(o){return o.color})},size:function(){return this.vboxes.size()},map:function(o){for(var t=this.vboxes,s=0;s<t.size();s++)if(t.peek(s).vbox.contains(o))return t.peek(s).color;return this.nearest(o)},nearest:function(o){for(var t,s,r,l=this.vboxes,n=0;n<l.size();n++)((s=Math.sqrt(Math.pow(o[0]-l.peek(n).color[0],2)+Math.pow(o[1]-l.peek(n).color[1],2)+Math.pow(o[2]-l.peek(n).color[2],2)))<t||t===void 0)&&(t=s,r=l.peek(n).color);return r},forcebw:function(){var o=this.vboxes;o.sort(function(l,n){return q(S(l.color),S(n.color))});var t=o[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(o[0].color=[0,0,0]);var s=o.length-1,r=o[s].color;r[0]>251&&r[1]>251&&r[2]>251&&(o[s].color=[255,255,255])}},{quantize:function(o,t){if(!Number.isInteger(t)||t<1||t>256)throw new Error("Invalid maximum color count. It must be an integer between 1 and 256.");if(!o.length||t<2||t>256||!o.length||t<2||t>256)return!1;for(var s=[],r=new Set,l=0;l<o.length;l++){var n=o[l],d=n.join(",");r.has(d)||(r.add(d),s.push(n))}if(s.length<=t)return new Z(s);var c=(function(a){var e,f=new Array(32768);return a.forEach(function(g){e=p(g[0]>>3,g[1]>>3,g[2]>>3),f[e]=(f[e]||0)+1}),f})(o);c.forEach(function(){});var m=(function(a,e){var f,g,x,z=1e6,I=0,M=1e6,L=0,N=1e6,R=0;return a.forEach(function(A){(f=A[0]>>3)<z?z=f:f>I&&(I=f),(g=A[1]>>3)<M?M=g:g>L&&(L=g),(x=A[2]>>3)<N?N=x:x>R&&(R=x)}),new b(z,I,M,L,N,R,e)})(o,c),y=new v(function(a,e){return q(a.count(),e.count())});function h(a,e){for(var f,g=a.size(),x=0;x<1e3;){if(g>=e||x++>1e3)return;if((f=a.pop()).count()){var z=w(c,f),I=z[0],M=z[1];if(!I)return;a.push(I),M&&(a.push(M),g++)}else a.push(f),x++}}y.push(m),h(y,.75*t);for(var C=new v(function(a,e){return q(a.count()*a.volume(),e.count()*e.volume())});y.size();)C.push(y.pop());h(C,t);for(var _=new k;C.size();)_.push(C.pop());return _}}})().quantize,U=function(p){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=p.naturalWidth,this.height=this.canvas.height=p.naturalHeight,this.context.drawImage(p,0,0,this.width,this.height)};U.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var j=function(){};j.prototype.getColor=function(p,v){return v===void 0&&(v=10),this.getPalette(p,5,v)[0]},j.prototype.getPalette=function(p,v,b){var k=(function(s){var r=s.colorCount,l=s.quality;if(r!==void 0&&Number.isInteger(r)){if(r===1)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");r=Math.max(r,2),r=Math.min(r,20)}else r=10;return(l===void 0||!Number.isInteger(l)||l<1)&&(l=10),{colorCount:r,quality:l}})({colorCount:v,quality:b}),w=new U(p),o=(function(s,r,l){for(var n,d,c,m,y,h=s,C=[],_=0;_<r;_+=l)d=h[0+(n=4*_)],c=h[n+1],m=h[n+2],((y=h[n+3])===void 0||y>=125)&&(d>250&&c>250&&m>250||C.push([d,c,m]));return C})(w.getImageData().data,w.width*w.height,k.quality),t=O(o,k.colorCount);return t?t.palette():null},j.prototype.getColorFromUrl=function(p,v,b){var k=this,w=document.createElement("img");w.addEventListener("load",function(){var o=k.getPalette(w,5,b);v(o[0],p)}),w.src=p},j.prototype.getImageData=function(p,v){var b=new XMLHttpRequest;b.open("GET",p,!0),b.responseType="arraybuffer",b.onload=function(){if(this.status==200){var k=new Uint8Array(this.response);i=k.length;for(var w=new Array(i),o=0;o<k.length;o++)w[o]=String.fromCharCode(k[o]);var t=w.join(""),s=window.btoa(t);v("data:image/png;base64,"+s)}},b.send()},j.prototype.getColorAsync=function(p,v,b){var k=this;this.getImageData(p,function(w){var o=document.createElement("img");o.addEventListener("load",function(){var t=k.getPalette(o,5,b);v(t[0],this)}),o.src=w})};const tt={class:"min-h-screen bg-slate-50 relative overflow-hidden font-sans selection:bg-rose-100"},et={class:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 py-10 flex flex-col min-h-screen"},ot={class:"text-center mb-10"},nt={class:"flex-1 grid lg:grid-cols-12 gap-8 items-start"},rt={class:"lg:col-span-5 flex flex-col gap-6"},st={class:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 flex flex-col items-center"},lt={key:0,class:"text-center p-8"},at={key:1,class:"relative w-full h-full flex items-center justify-center bg-slate-100"},it=["src"],ut={key:0,class:"mt-4 text-rose-500 flex items-center gap-2 text-sm font-medium"},ct={class:"lg:col-span-7 flex flex-col gap-6"},dt={class:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 md:p-8 min-h-[500px] flex flex-col"},ft={class:"flex items-center justify-between mb-6"},pt={key:0,class:"flex gap-2"},gt={key:0,class:"flex-1 flex flex-col items-center justify-center text-slate-400 border border-dashed border-slate-200 rounded-2xl bg-slate-50/50"},vt={key:1,class:"grid grid-cols-2 sm:grid-cols-4 gap-4 animate-fade-in-up"},xt={class:"bg-white/90 backdrop-blur-md px-3 py-1.5 rounded-lg shadow-sm flex items-center gap-2"},bt={class:"font-mono font-bold text-slate-800"},ht={key:0,class:"absolute inset-0 bg-black/10 flex items-center justify-center text-white font-bold backdrop-blur-[2px] animate-fade-in"},mt=["onClick"],wt={class:"bg-white/90 backdrop-blur-md p-3 translate-y-full group-hover:translate-y-0 transition-transform duration-300"},yt={class:"font-mono font-bold text-slate-800 text-sm text-center"},kt={key:0,class:"absolute inset-0 bg-black/10 flex items-center justify-center text-white font-bold backdrop-blur-[2px] animate-fade-in"},Ct={key:2,class:"mt-6"},_t={__name:"ImagePalette",setup(p){const v=P(""),b=P(null),k=P(null),w=P(!1),o=P(!1),t=P("hex"),s=P({hex:"#ffffff",rgb:"rgb(255,255,255)",r:255,g:255,b:255,copied:!1}),r=P([]),l=()=>b.value.click(),n=a=>{const e=a.target.files[0];e&&c(e),a.target.value=""},d=a=>{w.value=!1;const e=a.dataTransfer.files[0];e&&c(e)},c=a=>{if(!a.type.match("image.*")){alert("è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶");return}const e=new FileReader;e.onload=f=>{v.value=f.target.result,r.value=[]},e.readAsDataURL(a)},m=()=>{k.value&&(o.value=!0,setTimeout(()=>{try{const a=new j,e=k.value,f=a.getColor(e);s.value=h(f);const g=a.getPalette(e,8);r.value=g.map(x=>h(x))}catch(a){console.error("Color extraction failed",a)}finally{o.value=!1}},100))},y=(a,e,f)=>"#"+[a,e,f].map(g=>{const x=g.toString(16);return x.length===1?"0"+x:x}).join(""),h=([a,e,f])=>({r:a,g:e,b:f,hex:y(a,e,f),rgb:`rgb(${a}, ${e}, ${f})`,copied:!1}),C=async a=>{const e=t.value==="hex"?a.hex:a.rgb;try{await navigator.clipboard.writeText(e),a.copied=!0,setTimeout(()=>a.copied=!1,1500)}catch(f){console.error(f)}},_=H(()=>r.value.length===0?{}:{background:`linear-gradient(to right, ${r.value.map(e=>e.hex).join(", ")})`});return(a,e)=>{const f=J("RouterLink");return D(),E("div",tt,[e[17]||(e[17]=u("div",{class:"absolute inset-0 z-0 opacity-[0.4]",style:{"background-image":"radial-gradient(#cbd5e1 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),e[18]||(e[18]=u("div",{class:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-rose-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob"},null,-1)),e[19]||(e[19]=u("div",{class:"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-purple-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob animation-delay-2000"},null,-1)),e[20]||(e[20]=u("div",{class:"absolute top-[30%] right-[30%] w-[400px] h-[400px] bg-orange-300 rounded-full mix-blend-multiply filter blur-[100px] opacity-30 animate-blob animation-delay-4000"},null,-1)),u("div",et,[u("div",ot,[V(f,{to:"/",class:"inline-flex items-center gap-1 text-sm font-medium text-slate-500 hover:text-rose-600 mb-4 transition-colors"},{default:W(()=>[...e[4]||(e[4]=[u("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[u("path",{d:"m15 18-6-6 6-6"})],-1),$(" è¿”å›žé¦–é¡µ ",-1)])]),_:1}),e[5]||(e[5]=u("h1",{class:"text-4xl md:text-5xl font-extrabold text-slate-900 mb-4"},[u("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-rose-500 to-purple-600"},"çµæ„Ÿè°ƒè‰²æ¿")],-1)),e[6]||(e[6]=u("p",{class:"text-slate-600 max-w-2xl mx-auto"}," ä¸Šä¼ ç…§ç‰‡ï¼ŒAI è‡ªåŠ¨æå– 8 ç§çµæ„Ÿé…è‰²ã€‚ä¸€é”®å¤åˆ¶ Hex/RGBï¼Œä¸ºä½ çš„è®¾è®¡æ³¨å…¥çµé­‚ã€‚ ",-1))]),u("div",nt,[u("div",rt,[u("div",st,[e[10]||(e[10]=u("h2",{class:"text-lg font-bold text-slate-800 flex items-center gap-2 mb-6 w-full"},[u("span",{class:"w-1.5 h-6 bg-rose-500 rounded-full"}),$(" åŽŸå›¾é¢„è§ˆ ")],-1)),u("div",{class:X(["w-full relative group rounded-2xl overflow-hidden bg-slate-50 border-2 border-dashed border-slate-300 min-h-[300px] flex items-center justify-center transition-all cursor-pointer",{"border-rose-400 bg-rose-50/30":w.value}]),onDragover:e[0]||(e[0]=B(g=>w.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=B(g=>w.value=!1,["prevent"])),onDrop:B(d,["prevent"]),onClick:l},[v.value?(D(),E("div",at,[u("img",{ref_key:"imageRef",ref:k,src:v.value,class:"max-w-full max-h-[500px] object-contain shadow-sm",crossorigin:"anonymous",onLoad:m},null,40,it),e[8]||(e[8]=u("div",{class:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},[u("span",{class:"text-white font-bold bg-white/20 backdrop-blur px-4 py-2 rounded-full border border-white/30"}," æ›´æ¢å›¾ç‰‡ ")],-1))])):(D(),E("div",lt,[...e[7]||(e[7]=[u("div",{class:"w-20 h-20 bg-white rounded-full shadow-sm flex items-center justify-center text-4xl mx-auto mb-4 text-slate-300 group-hover:text-rose-500 transition-colors group-hover:scale-110 duration-300"}," ðŸŽ¨ ",-1),u("h3",{class:"font-bold text-slate-700 text-lg mb-1"}," ç‚¹å‡»æˆ–æ‹–æ‹½ç…§ç‰‡ ",-1),u("p",{class:"text-slate-500 text-xs mt-2"}," æ”¯æŒ JPG, PNG, WebP ",-1)])]))],34),u("input",{type:"file",ref_key:"fileInput",ref:b,accept:"image/*",class:"hidden",onChange:n},null,544),o.value?(D(),E("div",ut,[...e[9]||(e[9]=[u("svg",{class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[u("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),u("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),$(" æ­£åœ¨åˆ†æžè‰²å½©... ",-1)])])):T("",!0)])]),u("div",ct,[u("div",dt,[u("div",ft,[e[11]||(e[11]=u("h2",{class:"text-lg font-bold text-slate-800 flex items-center gap-2"},[u("span",{class:"w-1.5 h-6 bg-purple-500 rounded-full"}),$(" è‰²å½©æå–ç»“æžœ ")],-1)),r.value.length>0?(D(),E("div",pt,[u("button",{onClick:e[2]||(e[2]=g=>t.value=t.value==="hex"?"rgb":"hex"),class:"text-xs font-bold px-3 py-1.5 rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors"}," åˆ‡æ¢æ˜¾ç¤º: "+F(t.value.toUpperCase()),1)])):T("",!0)]),r.value.length===0?(D(),E("div",gt,[...e[12]||(e[12]=[u("div",{class:"text-4xl mb-4 opacity-30"}," ðŸŒˆ ",-1),u("p",{class:"text-sm"}," ç­‰å¾…å›¾ç‰‡ä¸Šä¼ ... ",-1)])])):(D(),E("div",vt,[u("div",{class:"col-span-2 sm:col-span-4 h-32 rounded-2xl shadow-sm relative group cursor-pointer overflow-hidden flex items-end p-4 transition-transform hover:scale-[1.01]",style:G({backgroundColor:s.value.hex}),onClick:e[3]||(e[3]=g=>C(s.value))},[e[14]||(e[14]=u("div",{class:"absolute top-3 left-3 bg-black/20 backdrop-blur text-white/90 text-[10px] px-2 py-0.5 rounded uppercase font-bold tracking-wider"}," Dominant ",-1)),u("div",xt,[u("span",bt,F(t.value==="hex"?s.value.hex:s.value.rgb),1),e[13]||(e[13]=u("div",{class:"i-tabler-copy text-slate-400 text-sm"},null,-1))]),s.value.copied?(D(),E("div",ht," å·²å¤åˆ¶! ")):T("",!0)],4),(D(!0),E(K,null,Q(r.value,(g,x)=>(D(),E("div",{key:x,class:"h-32 rounded-2xl shadow-sm relative group cursor-pointer overflow-hidden flex flex-col justify-end transition-transform hover:-translate-y-1",style:G({backgroundColor:g.hex}),onClick:z=>C(g)},[u("div",wt,[u("div",yt,F(t.value==="hex"?g.hex:g.rgb),1),e[15]||(e[15]=u("div",{class:"text-[10px] text-slate-500 text-center uppercase tracking-wide mt-0.5"}," Click to Copy ",-1))]),g.copied?(D(),E("div",kt," Copied ")):T("",!0)],12,mt))),128))])),r.value.length>0?(D(),E("div",Ct,[e[16]||(e[16]=u("h3",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2"}," Gradient Preview ",-1)),u("div",{class:"h-8 w-full rounded-xl shadow-inner border border-black/5",style:G(_.value)},null,4)])):T("",!0)])])])])])}}},Et=Y(_t,[["__scopeId","data-v-d9707daa"]]);export{Et as default};
