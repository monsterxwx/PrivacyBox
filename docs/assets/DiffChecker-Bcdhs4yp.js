import{r as k,c as V,a as b,b as l,l as N,j as W,m as O,n as D,w as T,A as q,h as C,v as M,f as B,t as P,F,g as R,o as h}from"./index-547FBy8I.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";class A{diff(t,n,s={}){let o;typeof s=="function"?(o=s,s={}):"callback"in s&&(o=s.callback);const r=this.castInput(t,s),f=this.castInput(n,s),c=this.removeEmpty(this.tokenize(r,s)),d=this.removeEmpty(this.tokenize(f,s));return this.diffWithOptionsObj(c,d,s,o)}diffWithOptionsObj(t,n,s,o){var r;const f=u=>{if(u=this.postProcess(u,s),o){setTimeout(function(){o(u)},0);return}else return u},c=n.length,d=t.length;let i=1,e=c+d;s.maxEditLength!=null&&(e=Math.min(e,s.maxEditLength));const p=(r=s.timeout)!==null&&r!==void 0?r:1/0,a=Date.now()+p,x=[{oldPos:-1,lastComponent:void 0}];let g=this.extractCommon(x[0],n,t,0,s);if(x[0].oldPos+1>=d&&g+1>=c)return f(this.buildValues(x[0].lastComponent,n,t));let L=-1/0,_=1/0;const z=()=>{for(let u=Math.max(L,-i);u<=Math.min(_,i);u+=2){let v;const w=x[u-1],y=x[u+1];w&&(x[u-1]=void 0);let j=!1;if(y){const I=y.oldPos-u;j=y&&0<=I&&I<c}const E=w&&w.oldPos+1<d;if(!j&&!E){x[u]=void 0;continue}if(!E||j&&w.oldPos<y.oldPos?v=this.addToPath(y,!0,!1,0,s):v=this.addToPath(w,!1,!0,1,s),g=this.extractCommon(v,n,t,u,s),v.oldPos+1>=d&&g+1>=c)return f(this.buildValues(v.lastComponent,n,t))||!0;x[u]=v,v.oldPos+1>=d&&(_=Math.min(_,u-1)),g+1>=c&&(L=Math.max(L,u+1))}i++};if(o)(function u(){setTimeout(function(){if(i>e||Date.now()>a)return o(void 0);z()||u()},0)})();else for(;i<=e&&Date.now()<=a;){const u=z();if(u)return u}}addToPath(t,n,s,o,r){const f=t.lastComponent;return f&&!r.oneChangePerToken&&f.added===n&&f.removed===s?{oldPos:t.oldPos+o,lastComponent:{count:f.count+1,added:n,removed:s,previousComponent:f.previousComponent}}:{oldPos:t.oldPos+o,lastComponent:{count:1,added:n,removed:s,previousComponent:f}}}extractCommon(t,n,s,o,r){const f=n.length,c=s.length;let d=t.oldPos,i=d-o,e=0;for(;i+1<f&&d+1<c&&this.equals(s[d+1],n[i+1],r);)i++,d++,e++,r.oneChangePerToken&&(t.lastComponent={count:1,previousComponent:t.lastComponent,added:!1,removed:!1});return e&&!r.oneChangePerToken&&(t.lastComponent={count:e,previousComponent:t.lastComponent,added:!1,removed:!1}),t.oldPos=d,i}equals(t,n,s){return s.comparator?s.comparator(t,n):t===n||!!s.ignoreCase&&t.toLowerCase()===n.toLowerCase()}removeEmpty(t){const n=[];for(let s=0;s<t.length;s++)t[s]&&n.push(t[s]);return n}castInput(t,n){return t}tokenize(t,n){return Array.from(t)}join(t){return t.join("")}postProcess(t,n){return t}get useLongestToken(){return!1}buildValues(t,n,s){const o=[];let r;for(;t;)o.push(t),r=t.previousComponent,delete t.previousComponent,t=r;o.reverse();const f=o.length;let c=0,d=0,i=0;for(;c<f;c++){const e=o[c];if(e.removed)e.value=this.join(s.slice(i,i+e.count)),i+=e.count;else{if(!e.added&&this.useLongestToken){let p=n.slice(d,d+e.count);p=p.map(function(a,x){const g=s[i+x];return g.length>a.length?g:a}),e.value=this.join(p)}else e.value=this.join(n.slice(d,d+e.count));d+=e.count,e.added||(i+=e.count)}}return o}}class $ extends A{}const U=new $;function G(m,t,n){return U.diff(m,t,n)}class H extends A{constructor(){super(...arguments),this.tokenize=Q}equals(t,n,s){return s.ignoreWhitespace?((!s.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!s.newlineIsToken||!n.includes(`
`))&&(n=n.trim())):s.ignoreNewlineAtEof&&!s.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),n.endsWith(`
`)&&(n=n.slice(0,-1))),super.equals(t,n,s)}}const J=new H;function K(m,t,n){return J.diff(m,t,n)}function Q(m,t){t.stripTrailingCr&&(m=m.replace(/\r\n/g,`
`));const n=[],s=m.split(/(\n|\r\n)/);s[s.length-1]||s.pop();for(let o=0;o<s.length;o++){const r=s[o];o%2&&!t.newlineIsToken?n[n.length-1]+=r:n.push(r)}return n}const X={class:"h-100% bg-slate-50 relative overflow-hidden font-sans selection:bg-indigo-100"},Y={class:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 py-8 flex flex-col h-[100%]"},Z={class:"flex flex-col md:flex-row justify-between items-center mb-6 shrink-0 gap-4"},ee={class:"flex items-center gap-4"},te={class:"flex items-center gap-3 bg-white/60 backdrop-blur p-1.5 rounded-xl shadow-sm border border-white/50 overflow-x-auto"},le={class:"flex bg-slate-200/50 rounded-lg p-1"},se={class:"flex items-center gap-2 cursor-pointer px-2"},ne={class:"flex-[1_0] min-h-0 flex flex-col gap-4 pb-4"},oe={class:"h-[40%] grid grid-cols-2 gap-4"},ie={class:"flex flex-col h-full relative group"},re={class:"relative z-10 flex flex-col h-full p-3"},ae={class:"flex justify-between items-center mb-2 px-1"},de={class:"flex flex-col h-full relative group"},ue={class:"relative z-10 flex flex-col h-full p-3"},fe={class:"flex justify-between items-center mb-2 px-1"},ce={class:"flex-1 flex flex-col relative min-h-0"},xe={class:"relative z-10 flex flex-col h-full p-4 overflow-hidden"},me={class:"flex justify-between items-center mb-3 shrink-0"},pe={class:"text-sm font-bold text-slate-700 flex items-center gap-2"},ge={key:0,class:"text-xs font-normal text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full"},ve={class:"flex-1 bg-white border border-slate-200 rounded-xl overflow-auto custom-scrollbar font-mono text-sm leading-6"},be={key:0,class:"h-full flex flex-col items-center justify-center text-slate-400"},he={key:1,class:"h-full flex flex-col items-center justify-center text-green-600"},we={key:2,class:"min-w-max"},ye={class:"w-8 shrink-0 text-center select-none opacity-50 border-r border-slate-100 mr-2 bg-slate-50/50"},ke={class:"whitespace-pre-wrap break-all py-0.5 pr-4 font-mono"},Ce={__name:"DiffChecker",setup(m){const t=k(""),n=k(""),s=k("lines"),o=k(!1),r=V(()=>{if(!t.value&&!n.value)return[];const i={ignoreWhitespace:o.value};let e;return s.value==="lines"?e=K(t.value,n.value,i):e=G(t.value,n.value,i),e}),f=V(()=>{if(!r.value.length)return null;let i=0,e=0;return r.value.forEach(p=>{p.added&&i++,p.removed&&e++}),{add:i,del:e}}),c=()=>{t.value="",n.value=""},d=async i=>{try{const e=await navigator.clipboard.readText();i==="old"?t.value=e:n.value=e}catch{alert("æ— æ³•è¯»å–å‰ªè´´æ¿ï¼Œè¯·æ‰‹åŠ¨ç²˜è´´")}};return(i,e)=>{const p=O("RouterLink");return h(),b("div",X,[e[22]||(e[22]=l("div",{class:"absolute inset-0 z-0 opacity-[0.4]",style:{"background-image":"radial-gradient(#cbd5e1 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),e[23]||(e[23]=l("div",{class:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-indigo-400 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob"},null,-1)),e[24]||(e[24]=l("div",{class:"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-blue-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob animation-delay-2000"},null,-1)),e[25]||(e[25]=l("div",{class:"absolute top-[30%] left-[30%] w-[400px] h-[400px] bg-sky-300 rounded-full mix-blend-multiply filter blur-[100px] opacity-30 animate-blob animation-delay-4000"},null,-1)),l("div",Y,[l("div",Z,[l("div",ee,[N(p,{to:"/",class:"w-10 h-10 bg-white/50 backdrop-blur rounded-full flex items-center justify-center text-slate-500 hover:text-indigo-600 hover:bg-white transition-all shadow-sm"},{default:W(()=>[...e[7]||(e[7]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"m15 18-6-6 6-6"})],-1)])]),_:1}),e[8]||(e[8]=l("div",null,[l("h1",{class:"text-2xl font-extrabold text-slate-900 flex items-center gap-2"},[l("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-sky-600"},"æ–‡æœ¬/ä»£ç å¯¹æ¯”"),l("span",{class:"text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full font-bold tracking-wide"},"DIFF")]),l("p",{class:"text-xs text-slate-500"}," å¿«é€Ÿæ¯”å¯¹æ–‡æœ¬å·®å¼‚ï¼Œéšç§å®‰å…¨ï¼Œæ— ä¸Šä¼ ã€‚ ")],-1))]),l("div",te,[l("div",le,[l("button",{onClick:e[0]||(e[0]=a=>s.value="lines"),class:D(["px-3 py-1.5 rounded-md text-xs font-bold transition-all",s.value==="lines"?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700"])}," è¡Œå¯¹æ¯” ",2),l("button",{onClick:e[1]||(e[1]=a=>s.value="chars"),class:D(["px-3 py-1.5 rounded-md text-xs font-bold transition-all",s.value==="chars"?"bg-white text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700"])}," å­—ç¬¦å¯¹æ¯” ",2)]),e[11]||(e[11]=l("div",{class:"w-px h-6 bg-slate-300 mx-1"},null,-1)),l("label",se,[T(l("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>o.value=a),class:"rounded text-indigo-600 focus:ring-indigo-500 border-gray-300"},null,512),[[q,o.value]]),e[9]||(e[9]=l("span",{class:"text-xs font-medium text-slate-600 select-none"},"å¿½ç•¥ç©ºæ ¼",-1))]),e[12]||(e[12]=l("div",{class:"w-px h-6 bg-slate-300 mx-1"},null,-1)),l("button",{onClick:c,class:"px-3 py-1.5 rounded-lg text-sm font-medium text-red-500 hover:bg-red-50 hover:text-red-600 transition-colors flex items-center gap-1"},[...e[10]||(e[10]=[l("span",{class:"text-lg"},"ðŸ—‘ï¸",-1),C(),l("span",{class:"hidden sm:inline"},"æ¸…ç©º",-1)])])])]),l("div",ne,[l("div",oe,[l("div",ie,[e[14]||(e[14]=l("div",{class:"absolute inset-0 bg-white/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/50"},null,-1)),l("div",re,[l("div",ae,[e[13]||(e[13]=l("label",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2"},[l("span",{class:"w-2 h-2 rounded-full bg-red-400"}),C(" åŽŸå§‹æ–‡æœ¬ (Original) ")],-1)),l("button",{onClick:e[3]||(e[3]=a=>d("old")),class:"text-xs text-indigo-500 hover:underline"}," ç²˜è´´ ")]),T(l("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>t.value=a),class:"flex-1 w-full bg-slate-50/50 border border-slate-200 rounded-xl p-3 font-mono text-xs md:text-sm resize-none outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all text-slate-700 custom-scrollbar",placeholder:"ç²˜è´´åŽŸå§‹ä»£ç /æ–‡æœ¬...",spellcheck:"false"},null,512),[[M,t.value]])])]),l("div",de,[e[16]||(e[16]=l("div",{class:"absolute inset-0 bg-white/70 backdrop-blur-xl rounded-2xl shadow-lg border border-white/50"},null,-1)),l("div",ue,[l("div",fe,[e[15]||(e[15]=l("label",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2"},[l("span",{class:"w-2 h-2 rounded-full bg-green-400"}),C(" ä¿®æ”¹æ–‡æœ¬ (Modified) ")],-1)),l("button",{onClick:e[5]||(e[5]=a=>d("new")),class:"text-xs text-indigo-500 hover:underline"}," ç²˜è´´ ")]),T(l("textarea",{"onUpdate:modelValue":e[6]||(e[6]=a=>n.value=a),class:"flex-1 w-full bg-slate-50/50 border border-slate-200 rounded-xl p-3 font-mono text-xs md:text-sm resize-none outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all text-slate-700 custom-scrollbar",placeholder:"ç²˜è´´ä¿®æ”¹åŽçš„ä»£ç /æ–‡æœ¬...",spellcheck:"false"},null,512),[[M,n.value]])])])]),l("div",ce,[e[21]||(e[21]=l("div",{class:"absolute inset-0 bg-white/80 backdrop-blur-xl rounded-2xl shadow-lg border border-white/50"},null,-1)),l("div",xe,[l("div",me,[l("h3",pe,[e[17]||(e[17]=l("span",{class:"text-lg"},"ðŸ“Š",-1)),e[18]||(e[18]=C(" å¯¹æ¯”ç»“æžœ ",-1)),f.value?(h(),b("span",ge,P(f.value.add)+" å¤„æ–°å¢ž, "+P(f.value.del)+" å¤„åˆ é™¤ ",1)):B("",!0)])]),l("div",ve,[!t.value&&!n.value?(h(),b("div",be,[...e[19]||(e[19]=[l("div",{class:"text-4xl mb-2 opacity-50"}," âš–ï¸ ",-1),l("p",null,"è¯·åœ¨ä¸Šæ–¹ç²˜è´´ä¸¤æ®µæ–‡æœ¬ä»¥å¼€å§‹å¯¹æ¯”",-1)])])):r.value.length===1&&!r.value[0].added&&!r.value[0].removed?(h(),b("div",he,[...e[20]||(e[20]=[l("div",{class:"text-4xl mb-2"}," âœ… ",-1),l("p",{class:"font-bold"}," å®Œç¾ŽåŒ¹é…ï¼ ",-1),l("p",{class:"text-xs text-slate-500 mt-1"}," ä¸¤æ®µæ–‡æœ¬å†…å®¹å®Œå…¨ä¸€è‡´ ",-1)])])):(h(),b("div",we,[(h(!0),b(F,null,R(r.value,(a,x)=>(h(),b("div",{key:x,class:D(["flex",{"bg-green-50 text-green-900":a.added,"bg-red-50 text-red-900 decoration-red-200":a.removed,"text-slate-600":!a.added&&!a.removed}])},[l("div",ye,P(a.added?"+":a.removed?"-":""),1),l("pre",ke,P(a.value),1)],2))),128))]))])])])])])])}}},_e=S(Ce,[["__scopeId","data-v-22c9cacf"]]);export{_e as default};
